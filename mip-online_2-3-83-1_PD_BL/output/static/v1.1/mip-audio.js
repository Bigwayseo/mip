define("extensions/mip-audio/0.1/mip-audio",["require","zepto","customElement"],function(i){function o(){var i=this.element;if(!i.isRender){i.isRender=!0;var o=i.getAttribute("src")||"";if(""!=o){var t=new a({url:o,layout:i});t.init()}}}function a(i){this.url=i.url,this.layout=i.layout,this.allstoptime,this.viodevalue=2,this.canplaythrough=!0,this.timeupdate=!0,this.dragboolen=!0,this.stopbtn=!1}var t=i("zepto"),e=i("customElement").create();return a.prototype={init:function(){var i=t(this.layout),o=this.creatdom();t(this.layout).append(o),this.audio=i.find("audio")[0],this.gettimelen(),this.playaudioEvent(),this.endaudioEvent()},creatdom:function(){var i="<div class='mip-audio'><div class='mip-audio-playbtn mip-audio-voice-play'></div><div class='mip-audiao-progress'><div class='mip-audiao-progressshow'></div><div class='mip-audiao-progresbtn mip-audiao-progres-bar'><div class='mip-audiao-progresbtn-slide'></div></div></div><div class='mip-audio-timeshow'><p>00:00</p></div><audio src = "+this.url+"></audio>";return i},playaudioEvent:function(){var i=t(this.layout),o=this;i.on("click",".mip-audio-playbtn",function(){o.playtrgger()})},endaudioEvent:function(){var i=this,o=t(this.layout);t(i.audio).on("ended",function(){o.find(".mip-audio-voice-stop").removeClass("mip-audio-voice-stop").addClass("mip-audio-voice-play")})},viodecontrol:function(){var i=t(this.layout),o=this;i.on("click",".mip-audio-voice",function(){0==o.viodevalue?(o.viodevalue=1,o.audio.volume=.5,o.audio.muted=!1,i.find(".mip-audio-voice0").removeClass("mip-audio-voice1").addClass("mip-audio-voice1"),i.find(".mip-audiao-progress-viode .mip-audiao-progresbtn").css("left","20%")):1==o.viodevalue?(o.viodevalue=2,o.audio.volume=1,o.audio.muted=!1,i.find(".mip-audio-voice1").removeClass("mip-audio-voice1").addClass("mip-audio-voice2"),i.find(".mip-audiao-progress-viode .mip-audiao-progresbtn").css("left","52%")):(o.viodevalue=0,o.audio.volume=0,o.audio.muted=!0,i.find(".mip-audio-voice2").removeClass("mip-audio-voice2").addClass("mip-audio-voice0"),i.find(".mip-audiao-progress-viode .mip-audiao-progresbtn").css("left","0%"))})},playtrgger:function(){var i=t(this.layout);if(this.audio.paused){if(this.audio.play(),i.find(".mip-audio-voice-play").removeClass("mip-audio-voice-play").addClass("mip-audio-voice-stop"),this.gettimelen(),this.progressshow(),!this.dragboolen)return;this.drag(),this.dragboolen=!1}else this.audio.pause(),clearInterval(this.allstoptime),i.find(".mip-audio-voice-stop").removeClass("mip-audio-voice-stop").addClass("mip-audio-voice-play")},progressshow:function(){var i=t(this.layout),o=this,a=i.find(".mip-audiao-progres-bar"),e=i.find(".mip-audio-timeshow p");o.allstoptime=setInterval(function(){var i=o.audio.currentTime;e.html(o.millisecondToDate(i));var t=parseInt(i)/parseInt(o.duration)*100+"%";a.css("left",t)},10)},gettimelen:function(){var i=this,o=t(this.layout);t(i.audio).on("canplay",function(){i.duration=i.audio.duration;var a=i.millisecondToDate(i.duration);i.canplaythrough&&(o.find(".mip-audio-timeshow p").html(a),i.canplaythrough=!1)}),t(i.audio).on("timeupdate",function(){i.duration=i.audio.duration;var a=i.millisecondToDate(i.duration);i.timeupdate&&(o.find(".mip-audio-timeshow p").html(a),i.timeupdate=!1)})},drag:function(){var i,o=t(this.layout),a=o.find(".mip-audiao-progresbtn")[0],e=t(a).parent(".mip-audiao-progress").width(),s=this,d=!1;a.addEventListener("touchstart",function(a){i=a.touches[0].clientX,d=!0,clearInterval(s.allstoptime),s.audio.paused||(s.audio.pause(),s.stopbtn=!0,o.find(".mip-audio-voice-stop").removeClass("mip-audio-voice-stop").addClass("mip-audio-voice-play"))}),a.addEventListener("touchmove",function(o){if(o.preventDefault(),o.stopPropagation(),d){var p=parseInt(t(a).position().left),u=o.touches[0].clientX-i,n=u+p;n>e?(a.style.left=e+"px",s.setTimepaly(n/e)):0>=n?(a.style.left="0px;",s.setTimepaly(parseInt(0))):(a.style.left=n+"px",s.setTimepaly(n/e)),i=o.touches[0].clientX}}),a.addEventListener("touchend",function(){d=!1,s.stopbtn&&(s.audio.play(),o.find(".mip-audio-voice-play").removeClass("mip-audio-voice-play").addClass("mip-audio-voice-stop")),s.progressshow()})},setTimepaly:function(i){var o=this,a=t(this.layout);o.audio.currentTime=parseInt(o.duration*i);var e=o.millisecondToDate(o.audio.currentTime);a.find(".mip-audio-timeshow p").html(e)},millisecondToDate:function(i){var o=parseInt(i),a=0,t=0;o>60&&(a=parseInt(o/60),o=parseInt(o%60),a>60&&(t=parseInt(a/60),a=parseInt(a%60))),parseInt(o)<10&&(o="0"+parseInt(o));var e=""+o;return 0==a&&(e="00:"+e),a>0&&(e=""+parseInt(a)+":"+e),t>0&&(e=""+parseInt(t)+":"+e),e}},e.prototype.build=o,e}),require(["extensions/mip-audio/0.1/mip-audio"],function(i){MIP.css.mipaudio=".mip-audio{width:300px;height:30px;background-color:#434343;border-radius:5px;margin-bottom:20px;padding:5px 15px;box-sizing:border-box;position:relative}.mip-audio-playbtn{width:20px;height:100%;display:inline-block}.mip-audiao-progress{width:187px;height:20px;display:inline-block;margin-left:10px;position:relative}.mip-audiao-progressshow{height:6px;width:100%;background-color:#818181;position:absolute;top:50%;margin-top:-3px;border:1px solid #989898;border-radius:8px}.mip-audiao-progresbtn{width:28px;height:28px;position:absolute;left:0;margin-top:-4px}.mip-audiao-progresbtn-slide{width:20px;background-color:#fff;height:12px;border-radius:8px;position:absolute;left:0;top:50%;margin-top:-5px}.mip-audio-timeshow{width:32px;height:20px;display:inline-block;margin-left:18px;position:relative}.mip-audio-timeshow p{position:absolute;top:5px;font-size:13px;color:#fff;margin:0}.mip-audio-voice-play{background:url(https://mipcache.bdstatic.com/static/static/auido/audioimg.png) no-repeat;background-size:cover}.mip-audio-voice-stop{background:url(https://mipcache.bdstatic.com/static/static/auido/audioimg.png) no-repeat;background-size:cover;background-position:-20px 0}.mip-audiao-progress-viode{width:38px}",MIP.registerMipElement("mip-audio",i,MIP.css.mipaudio)});