define("mip-filter/mip-filter",["require","customElement"],function(e){function t(){var e=this.element,t=new i({filterWrap:e.querySelector(e.getAttribute("mip-filter-filterWrap")),itemWrap:e.querySelector(e.getAttribute("mip-filter-itemWrap")),enableHash:e.getAttribute("mip-filter-enableHash")});t.init()}function i(e){var t=this;if(e&&e.filterWrap&&e.itemWrap){e.mobileWidth=e.mobileWidth||767,e.emptyTip=e.emptyTip||"没有符合的内容",e.enableHash=e.enableHash&&"false"===e.enableHash?!1:!0,this.init=function(){var t="",i="";if(e.enableHash)t=window.location.hash;if(t)i=t.replace("#","");else i="all";var n=e.filterWrap.querySelector('[data-filtertype="'+i+'"]');this.filterSelect(n)},this.filterSelect=function(i){var n=e.filterWrap.querySelector(".active")||"",o=i;if(n)r.removeClass(n,"active");r.addClass(i,"active");var a=o.textContent.replace(o.querySelector(".filter-num").textContent,"");if("查看全部"===a)a="无";if(e.filterWrap.querySelector(".filter-result").innerText="筛选："+a,window.innerWidth<=e.mobileWidth&&n)t.toggleFilter();t.applyFilter(o.dataset.filtertype)},this.toggleFilter=function(){var t=e.filterWrap.querySelector(".filter-list");if(window.innerWidth<=e.mobileWidth){if(r.hasClass(t,"show"))t.style.height="0px";else{t.style.transition="none",t.style.WebkitTransition="none",t.style.height="auto";var i=getComputedStyle(t).height;t.style.height="0px",t.style.transition="height 0.3s",setTimeout(function(){t.style.height=i},10)}r.toggleClass(t,"show")}},this.applyFilter=function(t){for(var i=0,n=0;n<e.itemWrap.querySelectorAll(".filter-item").length;n++){var o=e.itemWrap.querySelectorAll(".filter-item")[n];if(o.dataset.filtertype.match(r.containReg(t))||"all"===t)i++,o.style.display="block";else o.style.display="none"}if(!i)if(!e.itemWrap.querySelector(".filter-emptytip")){var a=document.createElement("div");r.addClass(a,"filter-emptytip"),a.innerHTML=e.emptyTip,e.itemWrap.appendChild(a)}else;else{var a=e.itemWrap.querySelector(".filter-emptytip");if(a)e.itemWrap.removeChild(a)}if(e.enableHash)window.location.hash=t;window.scrollTo(0,0)};for(var i=0;i<e.filterWrap.querySelectorAll(".filter-link").length;i++){var n=e.filterWrap.querySelectorAll(".filter-link")[i];n.addEventListener("click",function(e){t.filterSelect(e.target)})}e.filterWrap.querySelector(".filter-result").addEventListener("click",t.toggleFilter)}}var n=e("customElement").create(),r={containReg:function(e){return new RegExp("(\\s+|^)"+e+"(\\s+|$)")},hasClass:function(e,t){return e.className.match(this.containReg(t))},addClass:function(e,t){if(!this.hasClass(e,t))e.className=(e.className+" "+t).trim()},removeClass:function(e,t){if(this.hasClass(e,t))e.className=e.className.replace(this.containReg(t)," ").trim()},toggleClass:function(e,t){if(this.hasClass(e,t))this.removeClass(e,t);else this.addClass(e,t)}};return n.prototype.build=t,n}),define("mip-filter",["mip-filter/mip-filter"],function(e){return e}),function(){function e(e,t){e.registerMipElement("mip-filter",t,".filter{display:inline-block;width:250px;float:left}.filter ul{list-style:none}.filter-result{display:none}.filter-link{display:block;padding:0 25px;color:#333;line-height:50px;border-top:1px dotted #e6e6e6}.filter-link:hover{background:#f8f8f8;text-decoration:none}.filter-link.active{background:#88a0ec;color:white;font-weight:normal}.filter-link:last-child{border-bottom:1px dotted #e6e6e6}.filter-num{float:right}.filter-emptytip{padding-left:10px}@media screen and (max-width:767px){.filter{display:block;float:none;width:100%}.filter-result{display:block;padding:0 10px;line-height:50px}.filter-link{padding:0 10px}.filter-list{height:0;overflow:hidden}}")}if(window.MIP)require(["mip-filter"],function(t){e(window.MIP,t)});else require(["mip","mip-filter"],e)}();