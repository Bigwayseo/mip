define("extensions/mip-vd-tabs/0.1/tab",["require"],function(){function t(t,i,s,l,n){var o=0;i>t||(o=t>=l-i?s.parent().offset().width:s.offset().left-s.parent().offset().left-s.width()),e||(n?a(s.parent().parent().scrollLeft(),o,s.parent().parent()):s.parent().parent().scrollLeft(o))}function a(t,a,i){var s=(a-t)/8;e=setInterval(function(){var t=i.scrollLeft();s>0&&t>=a||0==s?(s=0,clearInterval(e)):0>s&&a>=t&&(s=0,clearInterval(e)),i.scrollLeft(t+s)},30),setTimeout(function(){clearInterval(e),i.scrollLeft(a),e=null},270)}var e,i=function(){},s=function(){var t=this,a=$(t.panel);this.toggle=a.find("."+t.toggleClass),this.view=a.find("."+t.viewClass),this.wrapper=a.find("."+t.navWrapperClass),this.navs=this.wrapper.find("."+t.navClass),this.conts=a.find("."+t.contClass),this.sum=this.navs.length,this.tabScroll=void 0,r.call(this),this.allowScroll&&this.view.length&&n.call(this),this.toggleMore&&this.allowScroll&&this.view.length&&o.call(this)},l=function(t){var a=this;return t.children().eq(0).wrap('<div class="mip-vd-tabs-scroll-touch"></div>'),t.children().eq(1).hasClass(a.toggleClass)&&t.find("."+a.navWrapperClass).append('<div class="mip-vd-tabs-nav-toggle-holder"></div>'),t},n=function(){var a=this;if(a.tabScroll=l.call(a,a.view),a.current>0&&a.current<a.sum){var e=Math.min(a.current+1,a.sum-1);t(e,1,a.navs.eq(a.current),a.navs.length,!1)}"function"==typeof a.onTabScrollEnd&&a.tabScroll.on("scrollEnd",function(){this.customFlag&&this.customFlag.autoScroll||a.onTabScrollEnd.call(a,this)})},o=function(){function t(){s.empty(),i.hide(),e.toggle.css({"-webkit-transform":"scaleY(1)",transform:"scaleY(1)"}),e.toggleState=0}function a(){s.html(e.navs.clone()),i.append(s),e.view.after(i.show()),e.toggle.css({"-webkit-transform":"scaleY(1)",transform:"scaleY(-1)"}),e.toggleState=1}var e=this,i=$('<div class="'+e.layerClass+'"><p>'+e.toggleLabel+"</p></div>"),s=$('<ul class="'+e.layerUlClass+'"></ul>');e.toggleState=0,s.on("click","."+e.navClass,function(){var a=$(this);e.navs.eq(a.attr("data-tid")).trigger("click"),t()}),e.toggle.on("click",function(){0==e.toggleState?a():t()})},r=function(){var a=this;$.each(a.navs,function(e,s){var l=$(s);l.hasClass(a.currentClass)&&(a.current=e),l.addClass(a.logClass),l.attr("data-tid",e),l.on("click",function(){var e=parseInt($(this).attr("data-tid"));e!==a.current&&(a.last=a.current,a.current=e,a.hideTab(a.last),a.showTab(a.current),a.onResetChange==i?(a.hideContent(a.last),a.showContent(a.current),a.onChange.call(a,a.current,a.conts[a.current])):a.onResetChange.call(a,a.current),a.tabScroll&&t(a.current+1,1,l,a.navs.length,!0))})}),$.each(a.conts,function(t){t==a.current?(a.showTab(t),a.showContent(t)):(a.hideTab(t),a.hideContent(t))})},d=function(t,a){a=a||{},this.panel=t,this.current=a.current||0,this.currentClass=a.currentClass||"c-tabs-nav-selected",this.navWrapperClass=a.navWrapperClass||"c-tabs-nav",this.navClass=a.navClass||"c-tabs-nav-li",this.contClass=a.contClass||"c-tabs-content",this.viewClass=a.viewClass||"c-tabs-nav-view",this.toggleClass=a.toggleClass||"c-tabs-nav-toggle",this.layerClass=a.layerClass||"c-tabs-nav-layer",this.layerUlClass=a.layerUlClass||"c-tabs-nav-layer-ul",this.allowScroll=a.allowScroll||!1,this.toggleMore=a.toggleMore||!1,this.toggleLabel=a.toggleLabel||"请选择",this.logClass=a.logClass||"WA_LOG_TAB",this.scrollSize=a.scrollSize||"-40",this.navs=[],this.seps=[],this.conts=[],this.sum=0,this.last=null,this.onChange=a.onChange||i,this.onResetChange=a.onResetChange||i,this.onTabScrollEnd=a.onTabScrollEnd,t&&s.call(this,a)};return $.extend(d.prototype,{showContent:function(t){var a=this.conts[t];a&&$(this.conts[t]).show()},hideContent:function(t){var a=this.conts[t];a&&$(a).hide()},showTab:function(t){var a=this,e=a.navs;a.seps,$(e[t]).addClass(a.currentClass)},hideTab:function(t){var a=this,e=a.navs;a.seps,$(e[t]).removeClass(a.currentClass)}}),d}),define("extensions/mip-vd-tabs/0.1/mip-vd-tabs",["require","zepto","customElement","extensions/mip-vd-tabs/0.1/tab"],function(t){function a(){var t=this.element;if(!t.isRender){t.isRender=!0;var a=t.getAttribute(g);switch(a){case"episode":var i=s.call(this);t.hasAttribute(b)&&(i=l.call(this,i)),n.call(this,i,t.getAttribute("total"),t.getAttribute(h),t.getAttribute("text-tpl"),t.getAttribute("link-tpl"),t.getAttribute("head-title"));break;case"bottom":default:e.call(this,i)}}}function e(){var t=this.element,a=o(t),e=t.getAttribute(g),i=!!t.hasAttribute(m),s=!!t.hasAttribute(b),l=parseInt(t.getAttribute(h),0)||0,n=null;a.addClass(f),n=o("bottom"===e?t.children.item(t.children.length-1):t.children.item(0)),n.detach(),n.children().each(function(t,a){var e=o(a);l===t&&e.addClass(w),e.addClass(x)}),i?(n.addClass(k).append(o('<div class="'+C+'"></div>').append(n.children())),s&&n.append('<div class="mip-vd-tabs-nav-toggle"><img src='+v+"></div>")):n.addClass("mip-vd-tabs-row-tile").append(o('<div class="'+C+'"></div>').append(n.children())),a.children().addClass(u).css("display","none").eq(l).css("display","block"),"bottom"===e?a.append(n):a.prepend(n),new d(a,{allowScroll:i,current:parseInt(a.attr(h),10)||1,toggleMore:s,toggleLabel:a.attr("toggle-label")||"请选择",currentClass:w,navWrapperClass:C,viewClass:k,contClass:u,navClass:x,logClass:"mip-vd-tabs-log",toggleClass:A,layerClass:"mip-vd-tabs-nav-layer",layerUlClass:"mip-vd-tabs-nav-layer-ul"})}function i(t){for(var a=o(this.element),e=parseInt(a.attr("page-size"),10)||c,i=parseInt(a.attr(h),10)||1,s=parseInt(a.attr("total"),10)||1,l=Math.ceil(s/e),n=Math.floor((i-1)/e),r=[],p=0;l>p;p++){var v=e*p+1,m=Math.min(s,e*(p+1));r.push({from:v,to:m,text:""+v+(m>v?" - "+m:"")})}var b=o('<div class="'+f+'"></div>');if(b.append(r.map(function(a,e){for(var s='<div class="'+u+' mip-vd-tabs-episode-content" '+(e===n?"":'style="display:none;" ')+" >",l=a.from;l<=a.to;l++){var o=l===i?"mip-vd-tabs-episode-item-selected":"",r=t?' href="'+t.replace(y,l)+'"':"";s=s+'<span class="mip-vd-tabs-episode-item '+o+'"'+r+">"+l+"</span>"}return s+="</div>"}).join("")),l>1){var g="",S=4;l>S&&(g='<div class="'+k+'">'),g+='<ul class="'+C+" "+Z+' mip-vd-tabs-episode-bottom-nav">',g+=r.map(function(t,a){var e=a===n?w:"";return'<li class="'+x+" "+e+'">'+t.text+"</li>"}).join(""),g+="</ul>",l>S&&(g+="</div>"),b.append(g),new d(b,{allowScroll:l>S,current:Math.floor((i-1)/e)||1,currentClass:w,navWrapperClass:C,viewClass:k,contClass:u,navClass:x,logClass:"mip-vd-tabs-log",toggleClass:A})}return b}function s(){var t=o(this.element),a=null;t.addClass(f);var e=parseInt(t.attr("total"),10)||1;return a=o(e>4?'<div class="'+k+'"><ul class="'+C+'"></ul></div>':'<div class="mip-vd-tabs-row-tile"><ul class="'+C+'"></ul></div>')}function l(t){var a=o(this.element),e=parseInt(a.attr("total"),10)||1;return 4>=e?t:(t.append('<div class="'+A+'"><img src='+v+"></div>"),t)}function n(t,a,e,s,l,n){for(var r=o(this.element),c=parseInt(a,10),v=parseInt(e,10)||1,b=s||"第{x}集",h="",g=Math.max(1,v-p),f=Math.min(c,v+p);f>=g;g++)h=h+'<a class="'+x+" "+(g===v?w:"")+'" '+(l?' href="'+l.replace(y,g)+'"':"")+">"+b.replace(y,""+g)+"</a>";t.find("."+C).append(h),r.empty().append(t);var u=new d(r,{allowScroll:!!r.get(0).hasAttribute(m),toggleMore:!1,current:v||1,currentClass:w,navWrapperClass:C,viewClass:k,navClass:x,logClass:"mip-vd-tabs-log",toggleClass:A,toggleLabel:r.attr("toggle-label")||"请选择"});!function(t){function a(){d.empty(),n.hide(),p.hide(),r.find(".mip-vd-tabs-nav-toggle,.mip-vd-tabs-scroll-touch").css({position:"",top:""}),r.find(".mip-vd-tabs-nav-layer").css({position:"","border-top":"",top:""}),s.toggle.css({"-webkit-transform":"scaleY(1)",transform:"scaleY(1)"}),s.toggleState=0}function e(){d.html(i.call(t,l)),n.append(d),r.append(p.show()),s.view.after(n.show()),r.find(".mip-vd-tabs-scroll-touch,.mip-vd-tabs-nav-toggle").css({position:"fixed",top:"1px"}),r.find(".mip-vd-tabs-nav-layer").css({position:"fixed","border-top":"1px solid #ccc",top:"0"}),s.toggle.css({"-webkit-transform":"scaleY(1)",transform:"scaleY(-1)"}),s.toggleState=1}var s=u,n=o('<div class="mip-vd-tabs-nav-layer"><p>'+s.toggleLabel+"</p></div>"),d=o('<ul class="mip-vd-tabs-nav-layer-ul"></ul>'),p=o('<div class="mip-vd-tabs-mask"></div>');s.toggleState=0,d.on("click",".mip-vd-tabs-episode-item ",function(){a()}),p.on("click",function(){a()}).on("touchmove",function(t){t.preventDefault()}),s.toggle.on("click",function(){0==s.toggleState?e():a()})}(this),r.delegate("."+x+", .mip-vd-tabs-episode-item","click",function(t){t.preventDefault();var a=o(this).attr("href");if(a){var e=o(this).text();e||(e=o(this).find("."+x).text());var i={event:"loadiframe",data:{url:a,title:n||e,click:r.data("click")}};window.parent!==window?window.parent.postMessage(i,"*"):location.href=a}})}var o=t("zepto"),r=t("customElement").create(),d=t("extensions/mip-vd-tabs/0.1/tab"),p=25,c=50,v="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAQCAMAAAA/D5+aAAAAUVBMVEUAAABmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmbIinYlAAAAGnRSTlMABKqP+IFs7+fStaZaSjsuGBAK3tzGw3gkIaqv3YsAAABmSURBVBjTddE5FoMwEMBQGcy+Q1bd/6Cp8xir/aWARKn3FFjdAK2O5020gVp9HjexStCowx4JtOr1iQTmrP0WCSxZuzUSWDvNSySw9ZrnSOD7UNtIYB/UUOB4lQTOsSSQpqp84U9+ascIWXpxA/QAAAAASUVORK5CYII=",m="allow-scroll",b="toggle-more",h="current",g="type",f="mip-vd-tabs",u="mip-vd-tabs-content",w="mip-vd-tabs-nav-selected",x="mip-vd-tabs-nav-li",C="mip-vd-tabs-nav",k="mip-vd-tabs-nav-view",A="mip-vd-tabs-nav-toggle",Z="mip-vd-tabs-nav-bottom",y=/\{\{\w}}/g;return r.prototype.init=function(){this.build=a},r}),require(["extensions/mip-vd-tabs/0.1/mip-vd-tabs"],function(t){MIP.css.mipVdTabs=".mip-vd-tabs{position:relative}.mip-vd-tabs-nav{display:-webkit-box;display:-webkit-flex;height:44px;font-size:14px;white-space:nowrap;background-color:#fff;-webkit-align-content:flex-start;-webkit-align-items:stretch;-webkit-box-align:stretch;-webkit-box-direction:normal;-webkit-box-lines:single;-webkit-box-orient:horizontal;-webkit-box-pack:justify;-webkit-flex-direction:row;-webkit-flex-wrap:nowrap;-webkit-justify-content:space-between;padding:0 16px}.mip-vd-tabs-nav *{-webkit-box-sizing:border-box;box-sizing:border-box}.mip-vd-tabs-nav-li{display:block;overflow:hidden;width:16.66666667%;height:44px;padding:0 14px 0 15px;line-height:44px;text-align:center;white-space:nowrap;text-decoration:none;text-overflow:ellipsis;list-style:none;color:#333;-webkit-box-flex:1;-webkit-flex:1 1 auto}.mip-vd-tabs-nav .mip-vd-tabs-nav-selected{border-bottom:1px solid #38f;color:#38f}.mip-vd-tabs-nav-bottom{border-top:1px solid #eee;background:#f8f8f8}.mip-vd-tabs-nav-bottom .mip-vd-tabs-nav-li{color:#666}.mip-vd-tabs-nav-bottom .mip-vd-tabs-nav-icon{display:none}.mip-vd-tabs-nav-bottom .mip-vd-tabs-nav-li.mip-vd-tabs-nav-selected{position:relative;top:-1px;height:38px;border:1px solid #f1f1f1;border-color:#fff #f1f1f1 #38f;line-height:38px;color:#333;background-color:#fff}.mip-vd-tabs-nav-bottom .mip-vd-tabs-nav-selected:first-child{margin-left:-1px}.mip-vd-tabs-nav-bottom .mip-vd-tabs-nav-selected .mip-vd-tabs-nav-icon{display:inline-block}.mip-vd-tabs-nav-view{position:relative;overflow:hidden;height:44px;text-align:left;background-color:#fff}.mip-vd-tabs-nav-view .mip-vd-tabs-nav{display:inline-block;position:relative}.mip-vd-tabs-nav-view .mip-vd-tabs-nav .mip-vd-tabs-nav-li{display:inline-block;vertical-align:middle;width:auto;padding:0 15px}.mip-vd-tabs-nav-view .mip-vd-tabs-nav.mip-vd-tabs-nav-bottom{background-color:#f8f8f8;position:relative;display:inline-block;vertical-align:middle}.mip-vd-tabs-nav-layer{position:absolute;z-index:8;top:0;width:100%;border-bottom:1px solid #e7e7e7;background-color:#fff}.mip-vd-tabs-nav-layer p{height:44px;padding:0 16px;border-bottom:1px solid #eee;line-height:44px;text-align:left;color:#333}.mip-vd-tabs-nav-layer-ul .mip-vd-tabs-nav-li{display:inline-block;width:16.66666667%;padding:0}.mip-vd-tabs-nav-layer-ul .mip-vd-tabs-nav-selected{color:#38f}.mip-vd-tabs .mip-vd-tabs-nav-toggle{position:absolute;z-index:9;top:0;right:0;display:block;width:42px;height:26px;margin:9px 0;border-left:1px solid #ccc;text-align:center;background-color:#fff}.mip-vd-tabs .mip-vd-tabs-nav-toggle img{position:absolute;top:50%;left:50%;display:inline-block;width:10px;height:6px;margin:-3px 0 0 -5px}.mip-vd-tabs .mip-vd-tabs-nav-toggle-holder{display:inline-block;width:29px;height:1px;visibility:hidden}.mip-vd-tabs-scroll-touch{position:relative;overflow-x:auto;-webkit-overflow-scrolling:touch;padding-bottom:30px;margin-top:-30px;-webkit-transform:translateY(30px);transform:translateY(30px);width:1px;min-width:100%}.mip-vd-tabs-episode-content{padding:15px 16px;text-align:left}.mip-vd-tabs-episode-item{display:inline-block;width:20%;height:40px;line-height:40px;text-align:center}.mip-vd-tabs-episode-item-selected{color:#38f}.mip-vd-tabs-episode-bottom-nav{padding:0;height:38px}.mip-vd-tabs-episode-bottom-nav .mip-vd-tabs-nav-li{height:38px;line-height:38px}.mip-vd-tabs-nav-view>.mip-vd-tabs-scroll-touch>.mip-vd-tabs-episode-bottom-nav.mip-vd-tabs-nav>.mip-vd-tabs-nav-li{display:inline-block}.mip-vd-tabs-episode-bottom-nav.mip-vd-tabs-nav .mip-vd-tabs-nav-li{display:block}.mip-vd-tabs-row-tile{width:100%;position:relative;overflow:hidden}.mip-vd-tabs-mask{position:fixed;top:0;left:0;height:100%;width:100%;background:rgba(0,0,0,.4)}",MIP.registerMipElement("mip-vd-tabs",t,MIP.css.mipVdTabs)});