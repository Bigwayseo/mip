define("extensions/mip-meishij/0.1/mip-meishij",["require","customElement"],function(require){function jsonpPost(t,n,i){return $.ajax({type:"POST",data:n,url:t,dataType:"jsonp",success:i})}function initBaifendian(t){var n={clientId:t.data("client-id"),path:t.data("path")},i="https:"==document.location.protocol?"https://ssl-static1":"http://static1";window._BFD=window._BFD||{},_BFD.BFD_USER={user_id:"",user_cookie:""},_BFD.client_id=n.clientId,_BFD.script=document.createElement("script"),_BFD.script.type="text/javascript",_BFD.script.async=!0,_BFD.script.charset="utf-8",_BFD.script.src=i+".baifendian.com"+n.path,document.getElementsByTagName("head")[0].appendChild(_BFD.script)}function initWeiboShare(t){var n={appkey:t.data("appkey"),title:t.data("title"),pic:t.data("pic"),url:t.data("url"),relateUid:t.data("relate-uid")},i="http://service.t.sina.com.cn/share/share.php?appkey="+n.appkey+"&title="+encodeURIComponent(n.title)+"&pic="+n.pic+"&url="+n.url+"&ralateUid="+n.ralateUid;t.click(function(){window.open(i)})}function initQQShare(t){var n={url:t.data("url"),desc:t.data("desc"),pics:t.data("pics"),summary:t.data("summary"),title:t.data("title"),site:t.data("site")},i="url="+encodeURIComponent(n.url)+"&desc="+encodeURIComponent(n.desc)+"&pics="+encodeURIComponent(n.pics)+"&summary="+encodeURIComponent(n.summary)+"&title="+encodeURIComponent(n.title)+"&site="+encodeURIComponent(n.site),a="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?"+i;t.click(function(){window.open(a,"newQQwindow","height=330,width=550,top="+(screen.height-280)/2+",left="+(screen.width-550)/2+", toolbar=no, menubar=no, scrollbars=no,resizable=yes,location=no, status=no")})}function initShare(t){var n=t.find(".weibo"),i=t.find(".qq");initWeiboShare(n),initQQShare(i),t.find("#share_box_shutbtn").click(function(){$("#share_box").animate({bottom:"-210px"},300,function(){$("#blackbg").remove()})}),$("#sharebtn_in_con").on("click",function(){$("body").append("<div style='height:100%;width:100%;position:fixed;left:0px;top:0px;background:rgba(0,0,0,0.75);z-index:20000;' id='blackbg'></div>"),$("#share_box").animate({bottom:"0px"},300)})}function initFavorite(){$(document).on("click",".addfav_box_c2_item",function(){$(this).hasClass("current")?$(this).removeClass("current"):$(this).addClass("current")}),$("#addfav_box_b2").on("click",function(){var t="";$.each($(".addfav_box_c2_item.current"),function(){t=t+$(this).attr("cdid")+","}),""!==t||$("#addfavbtn_in_con").hasClass("cbicon1_cur")?jsonpPost(URL+"/ajax/do_user_caidans.php?id="+id+"&act=modi&rids="+t,function(t){if(1==t){$("body").append("<div class='con_tips1' id='con_tips1'>收藏成功</div>");var n=setTimeout(function(){$("#con_tips1").remove()},3e3);$("#addfav_box_shutbtn").trigger("click")}else $("body").append("<div class='con_tips1' id='con_tips1'>取消收藏成功</div>"),n=setTimeout(function(){$("#con_tips1").remove()},3e3),$("#addfav_box_shutbtn").trigger("click"),$("#addfavbtn_in_con").removeClass("cbicon1_cur").addClass("cbicon1").html("收藏")}):$("#addfav_box_shutbtn").click()}),$("#addfavbtn_in_con").on("click",function(){$("body").append("<div style='height:100%;width:100%;position:fixed;left:0px;top:0px;background:rgba(0,0,0,0.75);z-index:20000;' id='blackbg'></div>"),$("#addfav_box").animate({bottom:"0px"},300,function(){})}),$("#addfavbtn_in_con").on("click",function(){$("#addfav_box").show(),$("#addnewcd_box").show(),$(this).hasClass("cbicon1_cur")?jsonpPost(URL+"/ajax/add_nfav.php?act=cancel&obj_id="+id,function(){$("body").append("<div class='con_tips1' id='con_tips1'>取消收藏成功</div>");setTimeout(function(){$("#con_tips1").remove()},3e3);$("#addfav_box_shutbtn").click(),$("#addfavbtn_in_con img").attr("src","http://site.meishij.net/p2/20160307/20160307180334_918.png"),$("#addfavbtn_in_con strong").css("color","#a5a5a5").html("收藏")}):jsonpPost(URL+"/ajax/do_user_caidans.php?id="+id,function(data){var obj=eval("("+data+")");1==obj.code?(jsonpPost(URL+"/ajax/add_nfav.php?obj_id="+id,function(){$("#addfavbtn_in_con img").attr("src","images/rd_b_sc_h@3x.png"),$("#addfavbtn_in_con strong").css("color","#ff4c35").html("已收藏")}),$("#addfav_box #addfav_box_c2").html(obj.data),$("#addfav_box").animate({bottom:"0px"},300)):0===obj.code&&(location.href="/login.php?redirect="+encodeURIComponent(location.href))})}),$("#addfav_box_shutbtn").on("click",function(){$("#addfav_box").animate({bottom:"-320px"},300,function(){$("#blackbg").remove()})})}function initMenu(){$("#addfav_box_b1").on("click",function(){$("#addnewcd_box").animate({top:"74px"},300)}),$("#addnewcd_box_a1").on("click",function(){$("#addnewcd_box").animate({top:"-400px"},300,function(){})}),$("#addnewcd_box_a2").on("click",function(){var t=$("#addnewcd_box_input").html();jsonpPost(URL+"/ajax/create_caidan.php?t="+encodeURIComponent(t),function(data){var obj=eval("("+data+")");2==obj.code?($("#addfav_box_c2").prepend(obj.msg),$("#addnewcd_box_a1").trigger("click"),$("#addnewcd_box_input").val("")):alert(obj.msg)})}),$("#addnewcd_box_input").focus(function(){var t=$(this),n=t.html();"请输入菜单名称"==n&&(t.html(""),t.css("color","#333"),$("#addnewcd_box_input").focus())})}var URL="http://m.meishij.net",id=$(".addfav_box").data("id"),customElem=require("customElement").create();return customElem.prototype.attachedCallback=function(){var t=$(this.element),n=t.find(".share_box"),i=t.find(".baifendian");initBaifendian(i),initShare(n),initFavorite(),initMenu()},customElem}),require(["extensions/mip-meishij/0.1/mip-meishij"],function(t){MIP.registerMipElement("mip-meishij",t)});