define("mip-iask-ext/mip-iask-ext",["require","zepto","customElement"],function(e){var t=e("zepto"),n=e("customElement").create(),i={switchBlock:function(){t(".similar-nav").on("click","li",function(){event.preventDefault();try{t(this).siblings().removeClass("current"),t(this).addClass("current");var e=t(this).index(),n=t(this).parent().siblings();t(n).hide(),t(n).slice(e,e+1).show()}catch(e){}})},changeMore:function(){t(".link-change").on("click",function(e){e.preventDefault();try{var n=5,i=t(this).parent().next().children(),r=t(this).attr("pagecount");if(!r)r=n;if(r>=i.length)r=0;var o=Number(r)+n;t(i).hide(),t(i).slice(r,o).show(),t(this).attr("pagecount",o)}catch(e){}})},openOrStop:function(){t(".os-click").on("click",function(e){e.preventDefault();try{var n=t(this);if("[展开]"===n.text())n.text("[收起]"),n.prev().show();else n.text("[展开]"),n.prev().hide()}catch(e){}})},reportChange:function(){t(".reportList li").on("click",function(){var e=t(this).find("span").attr("class");if("fakeChecked"===e)t(this).find("span").removeClass(),t(this).find("span").addClass("fakeCheck");else t(this).find("span").removeClass(),t(this).find("span").addClass("fakeChecked")})},clearReport:function(){t(".report-body").hide(),t(".report_id").text(""),t(".report_type").text(""),t(".report_typeId").text(""),t(".reportList li").each(function(){t(this).find("span").removeClass(),t(this).find("span").addClass("fakeCheck")})},cannelReport:function(){t(".cannelReport").on("click",function(){i.clearReport()})},okReport:function(){t(".okReport").click(function(){var e="";if(t(".reportList li").each(function(){var n=t(this).find("span").attr("class");if("fakeChecked"===n)e+=t(this).text().trim()+"-"}),""===e)alert("请选择举报原因！");else{var n="http://m.iask.sina.com.cn/checkLogin?m="+Math.random();t.get(n,function(n){if(null==n||"null"===n){var r=window.location.href;window.location.href="http://m.iask.sina.com.cn/login?source="+r}else{var o=t(".report_id").text(),s=t(".report_type").text(),a=t(".report_typeId").text();t.post("http://m.iask.sina.com.cn/question/reportnew",{reportList:e,questionId:o,type:s,typeId:a},function(e){var n=t.parseJSON(e);alert(n.desc)}),i.clearReport()}})}})},btnSearch:function(){t(".btn-search").click(function(){var e=t(".search-input").val();if(e.trim().length<2)return void alert("关键字必须大于等于2个字!");else return void(window.location.href="http://m.iask.sina.com.cn/search/1.html?content="+e)})},btnSend:function(){try{t(".btn-send").click(function(){event.preventDefault();var e=t(".search-input").val();console.log(e),window.location.href="http://m.iask.sina.com.cn/ask?content="+e})}catch(e){}},checkLogin:function(){var e=t(".index_login"),n=window.location.href,i=null,r="http://m.iask.sina.com.cn/checkLogin?m="+Math.random();t.get(r,function(r){if(null===r||"null"===r)e.attr("href","http://m.iask.sina.com.cn/login?source="+n);else{var o=t.parseJSON(r);if(i=o.nickname,i.length>4)i=i.substring(0,3)+"....";e.removeClass("btn-header btn-user"),e.addClass("user-nick"),e.html(i),e.click(function(e){e.preventDefault(),e.stopPropagation(),t(".user-more").show()})}})},userInfoHide:function(){t(document).click(function(e){t(".user-more").hide()}),t(".user-more").click(function(e){e.stopPropagation()})},init:function(){this.switchBlock(),this.changeMore(),this.openOrStop(),this.reportChange(),this.cannelReport(),this.okReport(),this.btnSearch(),this.btnSend(),this.checkLogin(),this.userInfoHide()}};return n.prototype.build=function(){i.init()},n}),define("mip-iask-ext",["mip-iask-ext/mip-iask-ext"],function(e){return e}),function(){function e(e,t){e.registerMipElement("mip-iask-ext",t)}if(window.MIP)require(["mip-iask-ext"],function(t){e(window.MIP,t)});else require(["mip","mip-iask-ext"],e)}();