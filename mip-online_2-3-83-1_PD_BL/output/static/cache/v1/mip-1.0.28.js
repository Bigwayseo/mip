window._mipStartTiming=Date.now(),function(e){function t(e){return"[object Array]"===Object.prototype.toString.call(e)}function n(){for(var e=0;e<T.length;e++)T[e][0](T[e][1]);T=[],v=!1}function i(e,t){if(T.push([e,t]),!v)v=!0,E(n,0)}function r(e,t){function n(e){a(t,e)}function i(e){l(t,e)}try{e(n,i)}catch(e){i(e)}}function o(e){var t=e.owner,n=t.state_,i=t.data_,r=e[n],o=e.then;if("function"==typeof r){n=b;try{i=r(i)}catch(e){l(o,e)}}if(!s(o,i)){if(n===b)a(o,i);if(n===x)l(o,i)}}function s(e,t){var n;try{if(e===t)throw new TypeError("A promises callback cannot return that same promise.");if(t&&("function"==typeof t||"object"==typeof t)){var i=t.then;if("function"==typeof i)return i.call(t,function(i){if(!n)if(n=!0,t!==i)a(e,i);else u(e,i)},function(t){if(!n)n=!0,l(e,t)}),!0}}catch(t){if(!n)l(e,t);return!0}return!1}function a(e,t){if(e===t||!s(e,t))u(e,t)}function u(e,t){if(e.state_===y)e.state_=g,e.data_=t,i(f,e)}function l(e,t){if(e.state_===y)e.state_=g,e.data_=t,i(p,e)}function c(e){var t=e.then_;e.then_=void 0;for(var n=0;n<t.length;n++)o(t[n])}function f(e){e.state_=b,c(e)}function p(e){e.state_=x,c(e)}function d(e){if("function"!=typeof e)throw new TypeError("Promise constructor takes a function argument");if(this instanceof d==!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],r(e,this)}var h=e.Promise,m=h&&"resolve"in h&&"reject"in h&&"all"in h&&"race"in h&&function(){var e;return new h(function(t){e=t}),"function"==typeof e}();if("undefined"!=typeof exports&&exports)exports.Promise=m?h:d,exports.Polyfill=d;else if("function"==typeof define&&define.amd)define(function(){return m?h:d});else if(!m)e.Promise=d;var v,y="pending",g="sealed",b="fulfilled",x="rejected",w=function(){},E="undefined"!=typeof setImmediate?setImmediate:setTimeout,T=[];d.prototype={constructor:d,state_:y,then_:null,data_:void 0,then:function(e,t){var n={owner:this,then:new this.constructor(w),fulfilled:e,rejected:t};if(this.state_===b||this.state_===x)i(o,n);else this.then_.push(n);return n.then},catch:function(e){return this.then(null,e)}},d.all=function(e){var n=this;if(!t(e))throw new TypeError("You must pass an array to Promise.all().");return new n(function(t,n){function i(e){return s++,function(n){if(o[e]=n,!--s)t(o)}}for(var r,o=[],s=0,a=0;a<e.length;a++)if(r=e[a],r&&"function"==typeof r.then)r.then(i(a),n);else o[a]=r;if(!s)t(o)})},d.race=function(e){var n=this;if(!t(e))throw new TypeError("You must pass an array to Promise.race().");return new n(function(t,n){for(var i,r=0;r<e.length;r++)if(i=e[r],i&&"function"==typeof i.then)i.then(t,n);else t(i)})},d.resolve=function(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;else return new t(function(t){t(e)})},d.reject=function(e){var t=this;return new t(function(t,n){n(e)})}}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this),function(e,t,n,i){"use strict";function r(e,t){for(var n=0,i=e.length;n<i;n++)m(e[n],t)}function o(e){for(var t,n=0,i=e.length;n<i;n++)t=e[n],E(t,q[a(t)])}function s(e){return function(t){if(ne(t))m(t,e),r(t.querySelectorAll(R),e)}}function a(e){var t=e.getAttribute("is"),n=e.nodeName.toUpperCase(),i=B.call(M,t?I+t.toUpperCase():D+n);return t&&-1<i&&!u(n,t)?-1:i}function u(e,t){return-1<R.indexOf(e+'[is="'+t+'"]')}function l(e){var t=e.currentTarget,n=e.attrChange,i=e.attrName,r=e.target;if(he&&(!r||r===t)&&t.attributeChangedCallback&&"style"!==i)t.attributeChangedCallback(i,n===e[S]?null:e.prevValue,n===e[L]?null:e.newValue)}function c(e){var t=s(e);return function(e){v.push(t,e.target)}}function f(e){if(de)de=!1,e.currentTarget.removeEventListener(O,f);if(r((e.target||t).querySelectorAll(R),e.detail===A?A:C),te)h()}function p(e,t){var n=this;oe.call(n,e,t),y.call(n,{target:n})}function d(e,t){if(Q(e,t),x)x.observe(e,ue);else{if(pe)e.setAttribute=p,e[T]=b(e),e.addEventListener(j,y);e.addEventListener(k,l)}if(e.createdCallback&&he)e.created=!0,e.createdCallback(),e.created=!1}function h(){for(var e,t=0,n=ie.length;t<n;t++)if(e=ie[t],!H.contains(e))ie.splice(t,1),m(e,A)}function m(e,t){var n,i=a(e);if(-1<i){if(w(e,q[i]),i=0,t===C&&!e[C]){if(e[A]=!1,e[C]=!0,i=1,te&&B.call(ie,e)<0)ie.push(e)}else if(t===A&&!e[A])e[C]=!1,e[A]=!0,i=1;if(i&&(n=e[t+"Callback"]))n.call(e)}}if(!(i in t)){var v,y,g,b,x,w,E,T="__"+i+(1e5*Math.random()>>0),C="attached",A="detached",_="extends",S="ADDITION",N="MODIFICATION",L="REMOVAL",k="DOMAttrModified",O="DOMContentLoaded",j="DOMSubtreeModified",D="<",I="=",P=/^[A-Z][A-Z0-9]*(?:-[A-Z0-9]+)+$/,F=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],M=[],q=[],R="",H=t.documentElement,B=M.indexOf||function(e){for(var t=this.length;t--&&this[t]!==e;);return t},z=n.prototype,U=z.hasOwnProperty,$=z.isPrototypeOf,V=n.defineProperty,W=n.getOwnPropertyDescriptor,X=n.getOwnPropertyNames,Z=n.getPrototypeOf,Y=n.setPrototypeOf,G=!!n.__proto__,J=n.create||function e(t){return t?(e.prototype=t,new e):this},Q=Y||(G?function(e,t){return e.__proto__=t,e}:X&&W?function(){function e(e,t){for(var n,i=X(t),r=0,o=i.length;r<o;r++)if(n=i[r],!U.call(e,n))V(e,n,W(t,n))}return function(t,n){do e(t,n);while((n=Z(n))&&!$.call(n,t));return t}}():function(e,t){for(var n in t)e[n]=t[n];return e}),K=e.MutationObserver||e.WebKitMutationObserver,ee=(e.HTMLElement||e.Element||e.Node).prototype,te=!$.call(ee,H),ne=te?function(e){return 1===e.nodeType}:function(e){return $.call(ee,e)},ie=te&&[],re=ee.cloneNode,oe=ee.setAttribute,se=ee.removeAttribute,ae=t.createElement,ue=K&&{attributes:!0,characterData:!0,attributeOldValue:!0},le=K||function(e){pe=!1,H.removeEventListener(k,le)},ce=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.msRequestAnimationFrame||function(e){setTimeout(e,10)},fe=!1,pe=!0,de=!0,he=!0;if(Y||G)w=function(e,t){if(!$.call(t,e))d(e,t)},E=d;else w=function(e,t){if(!e[T])e[T]=n(!0),d(e,t)},E=w;if(te)pe=!1,function(){var e=W(ee,"addEventListener"),t=e.value,n=function(e){var t=new CustomEvent(k,{bubbles:!0});t.attrName=e,t.prevValue=this.getAttribute(e),t.newValue=null,t[L]=t.attrChange=2,se.call(this,e),this.dispatchEvent(t)},i=function(e,t){var n=this.hasAttribute(e),i=n&&this.getAttribute(e),r=new CustomEvent(k,{bubbles:!0});if(oe.call(this,e,t),r.attrName=e,r.prevValue=n?i:null,r.newValue=t,n)r[N]=r.attrChange=1;else r[S]=r.attrChange=0;this.dispatchEvent(r)},r=function(e){var t,n=e.currentTarget,i=n[T],r=e.propertyName;if(i.hasOwnProperty(r)){if(i=i[r],t=new CustomEvent(k,{bubbles:!0}),t.attrName=i.name,t.prevValue=i.value||null,t.newValue=i.value=n[r]||null,null==t.prevValue)t[S]=t.attrChange=0;else t[N]=t.attrChange=1;n.dispatchEvent(t)}};e.value=function(e,o,s){if(e===k&&this.attributeChangedCallback&&this.setAttribute!==i)this[T]={className:{name:"class",value:this.className}},this.setAttribute=i,this.removeAttribute=n,t.call(this,"propertychange",r);t.call(this,e,o,s)},V(ee,"addEventListener",e)}();else if(!K)if(H.addEventListener(k,le),H.setAttribute(T,1),H.removeAttribute(T),pe)y=function(e){var t,n,i,r=this;if(r===e.target){t=r[T],r[T]=n=b(r);for(i in n)if(!(i in t))return g(0,r,i,t[i],n[i],S);else if(n[i]!==t[i])return g(1,r,i,t[i],n[i],N);for(i in t)if(!(i in n))return g(2,r,i,t[i],n[i],L)}},g=function(e,t,n,i,r,o){var s={attrChange:e,currentTarget:t,attrName:n,prevValue:i,newValue:r};s[o]=e,l(s)},b=function(e){for(var t,n,i={},r=e.attributes,o=0,s=r.length;o<s;o++)if(t=r[o],n=t.name,"setAttribute"!==n)i[n]=t.value;return i};t[i]=function(e,n){if(i=e.toUpperCase(),!fe){if(fe=!0,K)x=function(e,t){function n(e,t){for(var n=0,i=e.length;n<i;t(e[n++]));}return new K(function(i){for(var r,o,s=0,a=i.length;s<a;s++)if(r=i[s],"childList"===r.type)n(r.addedNodes,e),n(r.removedNodes,t);else if(o=r.target,he&&o.attributeChangedCallback&&"style"!==r.attributeName)o.attributeChangedCallback(r.attributeName,r.oldValue,o.getAttribute(r.attributeName))})}(s(C),s(A)),x.observe(t,{childList:!0,subtree:!0});else v=[],ce(function e(){for(;v.length;)v.shift().call(null,v.shift());ce(e)}),t.addEventListener("DOMNodeInserted",c(C)),t.addEventListener("DOMNodeRemoved",c(A));t.addEventListener(O,f),t.addEventListener("readystatechange",f),t.createElement=function(e,n){var i=ae.apply(t,arguments),r=""+e,o=B.call(M,(n?I:D)+(n||r).toUpperCase()),s=-1<o;if(n)if(i.setAttribute("is",n=n.toLowerCase()),s)s=u(r.toUpperCase(),n);if(he=!t.createElement.innerHTMLHelper,s)E(i,q[o]);return i},ee.cloneNode=function(e){var t=re.call(this,!!e),n=a(t);if(-1<n)E(t,q[n]);if(e)o(t.querySelectorAll(R));return t}}if(-2<B.call(M,I+i)+B.call(M,D+i))throw new Error("A "+e+" type is already registered");if(!P.test(i)||-1<B.call(F,i))throw new Error("The type "+e+" is invalid");var i,l=function(){return d?t.createElement(h,i):t.createElement(h)},p=n||z,d=U.call(p,_),h=d?n[_].toUpperCase():i,m=M.push((d?I:D)+i)-1;return R=R.concat(R.length?",":"",d?h+'[is="'+e.toLowerCase()+'"]':h),l.prototype=q[m]=U.call(p,"prototype")?p.prototype:J(ee),r(t.querySelectorAll(R),C),l}}}(window,document,Object,"registerElement");var define,require,esl;!function(e){function t(e){p(e,H)||(B[e]=1)}function n(e,t){function n(e){0===e.indexOf(".")&&r.push(e)}var r=[];if("string"==typeof e?n(e):D(e,function(e){n(e)}),r.length>0)throw new Error("[REQUIRE_FATAL]Relative ID is not allowed in global require: "+r.join(", "));var o=$.waitSeconds;return o&&e instanceof Array&&(P&&clearTimeout(P),P=setTimeout(i,1e3*o)),U(e,t)}function i(){function e(s,a){if(!o[s]&&!p(s,H)){o[s]=1,p(s,R)||i[s]||(i[s]=1,t.push(s));var u=F[s];u?a&&(i[s]||(i[s]=1,t.push(s)),D(u.depMs,function(t){e(t.absId,t.hard)})):r[s]||(r[s]=1,n.push(s))}}var t=[],n=[],i={},r={},o={};for(var s in B)e(s,1);if(t.length||n.length)throw new Error("[MODULE_TIMEOUT]Hang( "+(t.join(", ")||"none")+" ) Miss( "+(n.join(", ")||"none")+" )")}function r(e){D(V,function(t){a(e,t.deps,t.factory)}),V.length=0}function o(e,t,n){if(null==n&&(null==t?(n=e,e=null):(n=t,t=null,e instanceof Array&&(t=e,e=null))),null!=n){var i=window.opera;if(!e&&document.attachEvent&&(!i||"[object Opera]"!==i.toString())){var r=k();e=r&&r.getAttribute("data-require-id")}e?a(e,t,n):V[0]={deps:t,factory:n}}}function s(){var e=$.config[this.id];return e&&"object"==typeof e?e:{}}function a(e,t,n){F[e]||(F[e]={id:e,depsDec:t,deps:t||["require","exports","module"],factoryDeps:[],factory:n,exports:{},config:s,state:M,require:C(e),depMs:[],depMkv:{},depRs:[]})}function u(e){var t=F[e];if(t&&!p(e,q)){var n=t.deps,i=t.factory,r=0;"function"==typeof i&&(r=Math.min(i.length,n.length),!t.depsDec&&i.toString().replace(/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,"").replace(/require\(\s*(['"])([^'"]+)\1\s*\)/g,function(e,t,i){n.push(i)}));var o=[],s=[];D(n,function(n,i){var a,u,l=N(n),c=A(l.mod,e);c&&!z[c]?(l.res&&(u={id:n,mod:c,res:l.res},s.push(n),t.depRs.push(u)),a=t.depMkv[c],a||(a={id:l.mod,absId:c,hard:r>i},t.depMs.push(a),t.depMkv[c]=a,o.push(c))):a={absId:c},r>i&&t.factoryDeps.push(u||a)}),t.state=q,f(e),y(o),s.length&&t.require(s,function(){D(t.depRs,function(t){t.absId||(t.absId=A(t.id,e))}),l()})}}function l(){for(var e in B)u(e),c(e),d(e)}function c(e){function t(e){if(u(e),!p(e,q))return!1;if(p(e,R)||n[e])return!0;n[e]=1;var i=F[e],r=!0;return D(i.depMs,function(e){return r=t(e.absId)}),r&&D(i.depRs,function(e){return r=!!e.absId}),r&&!p(e,R)&&(i.state=R),r}var n={};t(e)}function f(t){function n(){if(!i&&r.state===R){i=1;var n=1;if(D(r.factoryDeps,function(e){var t=e.absId;return z[t]?void 0:(d(t),n=p(t,H))}),n){try{var o=r.factory,s="function"==typeof o?o.apply(e,h(r.factoryDeps,{require:r.require,exports:r.exports,module:r})):o;null!=s&&(r.exports=s),r.invokeFactory=null}catch(e){if(/^\[MODULE_MISS\]"([^"]+)/.test(e.message)){var a=r.depMkv[RegExp.$1];return a&&(a.hard=1),void(i=0)}throw e}v(t)}}}var i,r=F[t];r.invokeFactory=n}function p(e,t){return F[e]&&F[e].state>=t}function d(e){var t=F[e];t&&t.invokeFactory&&t.invokeFactory()}function h(e,t){var n=[];return D(e,function(e,i){"object"==typeof e&&(e=e.absId),n[i]=t[e]||F[e].exports}),n}function m(e,t){if(p(e,H))return void t();var n=W[e];n||(n=W[e]=[]),n.push(t)}function v(e){var t=F[e];t.state=H,delete B[e];for(var n=W[e]||[],i=n.length;i--;)n[i]();n.length=0,W[e]=null}function y(t,n,i){function r(){if("function"==typeof n&&!o){var i=1;D(t,function(e){return z[e]?void 0:i=!!p(e,H)}),i&&(o=1,n.apply(e,h(t,z)))}}var o=0;D(t,function(e){z[e]||p(e,H)||(m(e,r),(e.indexOf("!")>0?b:g)(e,i))}),r()}function g(t){function n(){var e=J[t];O(e||t,i)}function i(){if(s){var n;"function"==typeof s.init&&(n=s.init.apply(e,h(a,z))),null==n&&s.exports&&(n=e,D(s.exports.split("."),function(e){return n=n[e],!!n})),o(t,a,n||{})}else r(t);l()}if(!X[t]&&!F[t]){X[t]=1;var s=$.shim[t];s instanceof Array&&($.shim[t]=s={deps:s});var a=s&&(s.deps||[]);a?(D(a,function(e){$.shim[e]||($.shim[e]={})}),U(a,n)):n()}}function b(e,t){function n(t){u.exports=t||!0,v(e)}function i(i){var r=t?F[t].require:U;i.load(a.res,r,n,s.call({id:e}))}if(!F[e]){var o=J[e];if(o)return void g(o);var a=N(e),u={id:e,state:q};F[e]=u,n.fromText=function(e,t){new Function(t)(),r(e)},i(U(a.mod))}}function x(e,t){var n=L(e,1,t);return n.sort(I),n}function w(){function e(e){J[_(e)]=t}$.baseUrl=$.baseUrl.replace(/\/$/,"")+"/",Z=x($.paths),G=x($.map,1),D(G,function(e){e.v=x(e.v)}),Y=[],D($.packages,function(e){var t=e;"string"==typeof e&&(t={name:e.split("/")[0],location:e,main:"main"}),t.location=t.location||t.name,t.main=(t.main||"main").replace(/\.js$/i,""),t.reg=j(t.name),Y.push(t)}),Y.sort(I),Q=x($.urlArgs,1),J={};for(var t in $.bundles)D($.bundles[t],e)}function E(e,t,n){D(t,function(t){return t.reg.test(e)?(n(t.v,t.k,t),!1):void 0})}function T(e,t){var n=/(\.[a-z0-9]+)$/i,i=/(\?[^#]*)$/,r="",o=e,s="";i.test(e)&&(s=RegExp.$1,e=e.replace(i,"")),n.test(e)&&(r=RegExp.$1,o=e.replace(n,"")),null!=t&&(o=A(o,t));var a,u=o;return E(o,Z,function(e,t){u=u.replace(t,e),a=1}),a||E(o,Y,function(e,t,n){u=u.replace(n.name,n.location)}),/^([a-z]{2,10}:\/)?\//i.test(u)||(u=$.baseUrl+u),u+=r+s,E(o,Q,function(e){u+=(u.indexOf("?")>0?"&":"?")+e}),u}function C(e){function n(n,r){if("string"==typeof n){if(!i[n]){var o=A(n,e);if(d(o),!p(o,H))throw new Error('[MODULE_MISS]"'+o+'" is not exists!');i[n]=F[o].exports}return i[n]}if(n instanceof Array){var s=[],a=[];D(n,function(n,i){var r=N(n),o=A(r.mod,e),u=r.res,l=o;if(u){var c=o+"!"+u;0!==u.indexOf(".")&&J[c]?o=l=c:l=null}a[i]=l,t(o),s.push(o)}),y(s,function(){D(a,function(i,r){null==i&&(i=a[r]=A(n[r],e),t(i))}),y(a,r,e),l()},e),l()}}var i={};return n.toUrl=function(t){return T(t,e||"")},n}function A(e,t){if(!e)return"";t=t||"";var n=N(e);if(!n)return e;var i=n.res,r=S(n.mod,t);if(E(t,G,function(e){E(r,e,function(e,t){r=r.replace(t,e)})}),r=_(r),i){var o=p(r,H)&&U(r);i=o&&o.normalize?o.normalize(i,function(e){return A(e,t)}):A(i,t),r+="!"+i}return r}function _(e){return D(Y,function(t){var n=t.name;return n===e?(e=n+"/"+t.main,!1):void 0}),e}function S(e,t){if(0===e.indexOf(".")){var n=t.split("/"),i=e.split("/"),r=n.length-1,o=i.length,s=0,a=0;e:for(var u=0;o>u;u++)switch(i[u]){case"..":if(!(r>s))break e;s++,a++;break;case".":a++;break;default:break e}return n.length=r-s,i=i.slice(a),n.concat(i).join("/")}return e}function N(e){var t=e.split("!");return t[0]?{mod:t[0],res:t[1]}:void 0}function L(e,t,n){var i=[];for(var r in e)if(e.hasOwnProperty(r)){var o={k:r,v:e[r]};i.push(o),t&&(o.reg="*"===r&&n?/^/:j(r))}return i}function k(){if(K)return K;if(ee&&"interactive"===ee.readyState)return ee;for(var e=document.getElementsByTagName("script"),t=e.length;t--;){var n=e[t];if("interactive"===n.readyState)return ee=n,n}}function O(e,t){function n(){var e=i.readyState;("undefined"==typeof e||/^(loaded|complete)$/.test(e))&&(i.onload=i.onreadystatechange=null,i=null,t())}var i=document.createElement("script");i.setAttribute("data-require-id",e),i.src=T(e+".js"),i.async=!0,i.readyState?i.onreadystatechange=n:i.onload=n,K=i,ne?te.insertBefore(i,ne):te.appendChild(i),K=null}function j(e){return new RegExp("^"+e+"(/|$)")}function D(e,t){if(e instanceof Array)for(var n=0,i=e.length;i>n&&t(e[n],n)!==!1;n++);}function I(e,t){var n=e.k||e.name,i=t.k||t.name;return"*"===i?-1:"*"===n?1:i.length-n.length}var P,F={},M=1,q=2,R=3,H=4,B={},z={require:n,exports:1,module:1},U=C(),$={baseUrl:"./",paths:{},config:{},map:{},packages:[],shim:{},waitSeconds:0,bundles:{},urlArgs:{}};n.version="2.0.6",n.loader="esl",n.toUrl=U.toUrl;var V=[];o.amd={};var W={},X={};n.config=function(e){if(e){for(var t in $){var n=e[t],i=$[t];if(n)if("urlArgs"===t&&"string"==typeof n)$.urlArgs["*"]=n;else if(i instanceof Array)i.push.apply(i,n);else if("object"==typeof i)for(var r in n)i[r]=n[r];else $[t]=n}w()}},w();var Z,Y,G,J,Q,K,ee,te=document.getElementsByTagName("head")[0],ne=document.getElementsByTagName("base")[0];ne&&(te=ne.parentNode),define||(define=o,require||(require=n),esl=n)}(this),define("mip",["require","zepto","naboo","fetch-jsonp","fetch","./utils/fn","./utils/gesture/gesture-recognizer","./utils/gesture/data-processor","./utils/gesture","./utils/platform","./utils/event-emitter","./utils/event-action","./utils/customStorage","./dom/css-loader","./dom/rect","./dom/event","./dom/css","./dom/dom","./layout","./fixed-element","./viewport","./customElement","./element","./util","./resources","./viewer","./performance","./templates","./components/mip-img","./components/mip-pix","./components/mip-carousel","./components/mip-iframe","./components/index"],function(e){e("zepto"),e("naboo"),e("fetch-jsonp"),e("fetch"),e("./utils/fn"),e("./utils/gesture/gesture-recognizer"),e("./utils/gesture/data-processor"),e("./utils/gesture"),e("./utils/platform"),e("./utils/event-emitter"),e("./utils/event-action");var t=e("./utils/customStorage");e("./dom/css-loader"),e("./dom/rect"),e("./dom/event"),e("./dom/css"),e("./dom/dom");var n=e("./layout");e("./fixed-element");var i=e("./viewport");e("./customElement");var r=e("./element");e("./util");var o=e("./resources"),s=e("./viewer"),a=e("./performance"),u=e("./templates");e("./components/mip-img"),e("./components/mip-pix"),e("./components/mip-carousel"),e("./components/mip-iframe");var l=e("./components/index"),c={};if(!window.MIP)window.MIP=c;c.css={},c.viewer=s,c.viewport=i,c.prerenderElement=o.prerenderElement,c.registerMipElement=function(e,t,n){if(u.isTemplateClass(t))u.register(e,t);else r(e,t,n)},s.init();var f=Array.prototype.slice.call(document.getElementsByClassName("mip-hidden")),p=/mip-/i;f.forEach(function(e){if(e.tagName.search(p)>-1)n.applyLayout(e)}),l.register(),a.start(window._mipStartTiming),a.on("update",function(e){s.sendMessage("performance_update",e)}),s.show();var d=new t(2);return d.delExceedCookie(),c}),function(e,t){if("function"==typeof define&&define.amd)define("zepto",[],function(){return t(e)});else t(e)}(this,function(e){var t=function(){function t(e){return null==e?String(e):Y[G.call(e)]||"object"}function n(e){return"function"==t(e)}function i(e){return null!=e&&e==e.window}function r(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function o(e){return"object"==t(e)}function s(e){return o(e)&&!i(e)&&Object.getPrototypeOf(e)==Object.prototype}function a(e){var t=!!e&&"length"in e&&e.length,n=A.type(e);return"function"!=n&&!i(e)&&("array"==n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function u(e){return O.call(e,function(e){return null!=e})}function l(e){return e.length>0?A.fn.concat.apply([],e):e}function c(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function f(e){return e in P?P[e]:P[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function p(e,t){return"number"==typeof t&&!F[c(e)]?t+"px":t}function d(e){var t,n;if(!I[e])t=D.createElement(e),D.body.appendChild(t),n=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==n&&(n="block"),I[e]=n;return I[e]}function h(e){return"children"in e?j.call(e.children):A.map(e.childNodes,function(e){if(1==e.nodeType)return e})}function m(e,t){var n,i=e?e.length:0;for(n=0;n<i;n++)this[n]=e[n];this.length=i,this.selector=t||""}function v(e,t,n){for(C in t)if(n&&(s(t[C])||ee(t[C]))){if(s(t[C])&&!s(e[C]))e[C]={};if(ee(t[C])&&!ee(e[C]))e[C]=[];v(e[C],t[C],n)}else if(t[C]!==T)e[C]=t[C]}function y(e,t){return null==t?A(e):A(e).filter(t)}function g(e,t,i,r){return n(t)?t.call(e,i,r):t}function b(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function x(e,t){var n=e.className||"",i=n&&n.baseVal!==T;if(t===T)return i?n.baseVal:n;else return void(i?n.baseVal=t:e.className=t)}function w(e){try{return e?"true"==e||("false"==e?!1:"null"==e?null:+e+""==e?+e:/^[\[\{]/.test(e)?A.parseJSON(e):e):e}catch(t){return e}}function E(e,t){t(e);for(var n=0,i=e.childNodes.length;n<i;n++)E(e.childNodes[n],t)}var T,C,A,_,S,N,L=[],k=L.concat,O=L.filter,j=L.slice,D=e.document,I={},P={},F={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},M=/^\s*<(\w+|!)[^>]*>/,q=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,R=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,H=/^(?:body|html)$/i,B=/([A-Z])/g,z=["val","css","html","text","data","width","height","offset"],U=["after","prepend","before","append"],$=D.createElement("table"),V=D.createElement("tr"),W={tr:D.createElement("tbody"),tbody:$,thead:$,tfoot:$,td:V,th:V,"*":D.createElement("div")},X=/complete|loaded|interactive/,Z=/^[\w-]*$/,Y={},G=Y.toString,J={},Q=D.createElement("div"),K={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},ee=Array.isArray||function(e){return e instanceof Array};if(J.matches=function(e,t){if(!t||!e||1!==e.nodeType)return!1;var n=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(n)return n.call(e,t);var i,r=e.parentNode,o=!r;if(o)(r=Q).appendChild(e);return i=~J.qsa(r,t).indexOf(e),o&&Q.removeChild(e),i},S=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},N=function(e){return O.call(e,function(t,n){return e.indexOf(t)==n})},J.fragment=function(e,t,n){var i,r,o;if(q.test(e))i=A(D.createElement(RegExp.$1));if(!i){if(e.replace)e=e.replace(R,"<$1></$2>");if(t===T)t=M.test(e)&&RegExp.$1;if(!(t in W))t="*";o=W[t],o.innerHTML=""+e,i=A.each(j.call(o.childNodes),function(){o.removeChild(this)})}if(s(n))r=A(i),A.each(n,function(e,t){if(z.indexOf(e)>-1)r[e](t);else r.attr(e,t)});return i},J.Z=function(e,t){return new m(e,t)},J.isZ=function(e){return e instanceof J.Z},J.init=function(e,t){var i;if(!e)return J.Z();else if("string"==typeof e)if(e=e.trim(),"<"==e[0]&&M.test(e))i=J.fragment(e,RegExp.$1,t),e=null;else if(t!==T)return A(t).find(e);else i=J.qsa(D,e);else if(n(e))return A(D).ready(e);else if(J.isZ(e))return e;else if(ee(e))i=u(e);else if(o(e))i=[e],e=null;else if(M.test(e))i=J.fragment(e.trim(),RegExp.$1,t),e=null;else if(t!==T)return A(t).find(e);else i=J.qsa(D,e);return J.Z(i,e)},A=function(e,t){return J.init(e,t)},A.extend=function(e){var t,n=j.call(arguments,1);if("boolean"==typeof e)t=e,e=n.shift();return n.forEach(function(n){v(e,n,t)}),e},J.qsa=function(e,t){var n,i="#"==t[0],r=!i&&"."==t[0],o=i||r?t.slice(1):t,s=Z.test(o);return e.getElementById&&s&&i?(n=e.getElementById(o))?[n]:[]:1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType?[]:j.call(s&&!i&&e.getElementsByClassName?r?e.getElementsByClassName(o):e.getElementsByTagName(t):e.querySelectorAll(t))},A.contains=D.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){for(;t&&(t=t.parentNode);)if(t===e)return!0;return!1},A.type=t,A.isFunction=n,A.isWindow=i,A.isArray=ee,A.isPlainObject=s,A.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},A.isNumeric=function(e){var t=Number(e),n=typeof e;return null!=e&&"boolean"!=n&&("string"!=n||e.length)&&!isNaN(t)&&isFinite(t)||!1},A.inArray=function(e,t,n){return L.indexOf.call(t,e,n)},A.camelCase=S,A.trim=function(e){return null==e?"":String.prototype.trim.call(e)},A.uuid=0,A.support={},A.expr={},A.noop=function(){},A.map=function(e,t){var n,i,r,o=[];if(a(e)){for(i=0;i<e.length;i++)if(n=t(e[i],i),null!=n)o.push(n)}else for(r in e)if(n=t(e[r],r),null!=n)o.push(n);return l(o)},A.each=function(e,t){var n,i;if(a(e)){for(n=0;n<e.length;n++)if(t.call(e[n],n,e[n])===!1)return e}else for(i in e)if(t.call(e[i],i,e[i])===!1)return e;return e},A.grep=function(e,t){return O.call(e,t)},e.JSON)A.parseJSON=JSON.parse;return A.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){Y["[object "+t+"]"]=t.toLowerCase()}),A.fn={constructor:J.Z,length:0,forEach:L.forEach,reduce:L.reduce,push:L.push,sort:L.sort,splice:L.splice,indexOf:L.indexOf,concat:function(){var e,t,n=[];for(e=0;e<arguments.length;e++)t=arguments[e],n[e]=J.isZ(t)?t.toArray():t;return k.apply(J.isZ(this)?this.toArray():this,n)},map:function(e){return A(A.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return A(j.apply(this,arguments))},ready:function(e){if(X.test(D.readyState)&&D.body)e(A);else D.addEventListener("DOMContentLoaded",function(){e(A)},!1);return this},get:function(e){return e===T?j.call(this):this[e>=0?e:e+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){if(null!=this.parentNode)this.parentNode.removeChild(this)})},each:function(e){return L.every.call(this,function(t,n){return e.call(t,n,t)!==!1}),this},filter:function(e){if(n(e))return this.not(this.not(e));else return A(O.call(this,function(t){return J.matches(t,e)}))},add:function(e,t){return A(N(this.concat(A(e,t))))},is:function(e){return this.length>0&&J.matches(this[0],e)},not:function(e){var t=[];if(n(e)&&e.call!==T)this.each(function(n){if(!e.call(this,n))t.push(this)});else{var i="string"==typeof e?this.filter(e):a(e)&&n(e.item)?j.call(e):A(e);this.forEach(function(e){if(i.indexOf(e)<0)t.push(e)})}return A(t)},has:function(e){return this.filter(function(){return o(e)?A.contains(this,e):A(this).find(e).size()})},eq:function(e){return e===-1?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!o(e)?e:A(e)},last:function(){var e=this[this.length-1];return e&&!o(e)?e:A(e)},find:function(e){var t,n=this;if(!e)t=A();else if("object"==typeof e)t=A(e).filter(function(){var e=this;return L.some.call(n,function(t){return A.contains(t,e)})});else if(1==this.length)t=A(J.qsa(this[0],e));else t=this.map(function(){return J.qsa(this,e)});return t},closest:function(e,t){var n=[],i="object"==typeof e&&A(e);return this.each(function(o,s){for(;s&&!(i?i.indexOf(s)>=0:J.matches(s,e));)s=s!==t&&!r(s)&&s.parentNode;if(s&&n.indexOf(s)<0)n.push(s)}),A(n)},parents:function(e){for(var t=[],n=this;n.length>0;)n=A.map(n,function(e){if((e=e.parentNode)&&!r(e)&&t.indexOf(e)<0)return t.push(e),e});return y(t,e)},parent:function(e){return y(N(this.pluck("parentNode")),e)},children:function(e){return y(this.map(function(){return h(this)}),e)},contents:function(){return this.map(function(){return this.contentDocument||j.call(this.childNodes)})},siblings:function(e){return y(this.map(function(e,t){return O.call(h(t.parentNode),function(e){return e!==t})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return A.map(this,function(t){return t[e]})},show:function(){return this.each(function(){if("none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display"))this.style.display=d(this.nodeName)})},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var t=n(e);if(this[0]&&!t)var i=A(e).get(0),r=i.parentNode||this.length>1;return this.each(function(n){A(this).wrapAll(t?e.call(this,n):r?i.cloneNode(!0):i)})},wrapAll:function(e){if(this[0]){A(this[0]).before(e=A(e));for(var t;(t=e.children()).length;)e=t.first();A(e).append(this)}return this},wrapInner:function(e){var t=n(e);return this.each(function(n){var i=A(this),r=i.contents(),o=t?e.call(this,n):e;r.length?r.wrapAll(o):i.append(o)})},unwrap:function(){return this.parent().each(function(){A(this).replaceWith(A(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(e){return this.each(function(){var t=A(this);(e===T?"none"==t.css("display"):e)?t.show():t.hide()})},prev:function(e){return A(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return A(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return 0 in arguments?this.each(function(t){var n=this.innerHTML;A(this).empty().append(g(this,e,t,n))}):0 in this?this[0].innerHTML:null},text:function(e){return 0 in arguments?this.each(function(t){var n=g(this,e,t,this.textContent);this.textContent=null==n?"":""+n}):0 in this?this.pluck("textContent").join(""):null},attr:function(e,t){var n;return"string"==typeof e&&!(1 in arguments)?0 in this&&1==this[0].nodeType&&null!=(n=this[0].getAttribute(e))?n:T:this.each(function(n){if(1===this.nodeType)if(o(e))for(C in e)b(this,C,e[C]);else b(this,e,g(this,t,n,this.getAttribute(e)))})},removeAttr:function(e){return this.each(function(){1===this.nodeType&&e.split(" ").forEach(function(e){b(this,e)},this)})},prop:function(e,t){return e=K[e]||e,1 in arguments?this.each(function(n){this[e]=g(this,t,n,this[e])}):this[0]&&this[0][e]},removeProp:function(e){return e=K[e]||e,this.each(function(){delete this[e]})},data:function(e,t){var n="data-"+e.replace(B,"-$1").toLowerCase(),i=1 in arguments?this.attr(n,t):this.attr(n);return null!==i?w(i):T},val:function(e){if(0 in arguments){if(null==e)e="";return this.each(function(t){this.value=g(this,e,t,this.value)})}else return this[0]&&(this[0].multiple?A(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(t){if(t)return this.each(function(e){var n=A(this),i=g(this,t,e,n.offset()),r=n.offsetParent().offset(),o={top:i.top-r.top,left:i.left-r.left};if("static"==n.css("position"))o.position="relative";n.css(o)});if(!this.length)return null;if(D.documentElement!==this[0]&&!A.contains(D.documentElement,this[0]))return{top:0,left:0};var n=this[0].getBoundingClientRect();return{left:n.left+e.pageXOffset,top:n.top+e.pageYOffset,width:Math.round(n.width),height:Math.round(n.height)}},css:function(e,n){if(arguments.length<2){var i=this[0];if("string"==typeof e){if(!i)return;return i.style[S(e)]||getComputedStyle(i,"").getPropertyValue(e)}else if(ee(e)){if(!i)return;var r={},o=getComputedStyle(i,"");return A.each(e,function(e,t){r[t]=i.style[S(t)]||o.getPropertyValue(t)}),r}}var s="";if("string"==t(e))if(!n&&0!==n)this.each(function(){this.style.removeProperty(c(e))});else s=c(e)+":"+p(e,n);else for(C in e)if(!e[C]&&0!==e[C])this.each(function(){this.style.removeProperty(c(C))});else s+=c(C)+":"+p(C,e[C])+";";return this.each(function(){this.style.cssText+=";"+s})},index:function(e){return e?this.indexOf(A(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){if(!e)return!1;else return L.some.call(this,function(e){return this.test(x(e))},f(e))},addClass:function(e){if(!e)return this;else return this.each(function(t){if("className"in this){_=[];var n=x(this),i=g(this,e,t,n);i.split(/\s+/g).forEach(function(e){if(!A(this).hasClass(e))_.push(e)},this),_.length&&x(this,n+(n?" ":"")+_.join(" "))}})},removeClass:function(e){return this.each(function(t){if("className"in this){if(e===T)return x(this,"");_=x(this),g(this,e,t,_).split(/\s+/g).forEach(function(e){_=_.replace(f(e)," ")}),x(this,_.trim())}})},toggleClass:function(e,t){if(!e)return this;else return this.each(function(n){var i=A(this),r=g(this,e,n,x(this));r.split(/\s+/g).forEach(function(e){
(t===T?!i.hasClass(e):t)?i.addClass(e):i.removeClass(e)})})},scrollTop:function(e){if(this.length){var t="scrollTop"in this[0];if(e===T)return t?this[0].scrollTop:this[0].pageYOffset;else return this.each(t?function(){this.scrollTop=e}:function(){this.scrollTo(this.scrollX,e)})}},scrollLeft:function(e){if(this.length){var t="scrollLeft"in this[0];if(e===T)return t?this[0].scrollLeft:this[0].pageXOffset;else return this.each(t?function(){this.scrollLeft=e}:function(){this.scrollTo(e,this.scrollY)})}},position:function(){if(this.length){var e=this[0],t=this.offsetParent(),n=this.offset(),i=H.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(A(e).css("margin-top"))||0,n.left-=parseFloat(A(e).css("margin-left"))||0,i.top+=parseFloat(A(t[0]).css("border-top-width"))||0,i.left+=parseFloat(A(t[0]).css("border-left-width"))||0,{top:n.top-i.top,left:n.left-i.left}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||D.body;e&&!H.test(e.nodeName)&&"static"==A(e).css("position");)e=e.offsetParent;return e})}},A.fn.detach=A.fn.remove,["width","height"].forEach(function(e){var t=e.replace(/./,function(e){return e[0].toUpperCase()});A.fn[e]=function(n){var o,s=this[0];if(n===T)return i(s)?s["inner"+t]:r(s)?s.documentElement["scroll"+t]:(o=this.offset())&&o[e];else return this.each(function(t){s=A(this),s.css(e,g(this,n,t,s[e]()))})}}),U.forEach(function(n,i){var r=i%2;A.fn[n]=function(){var n,o,s=A.map(arguments,function(e){var i=[];if(n=t(e),"array"==n)return e.forEach(function(e){if(e.nodeType!==T)return i.push(e);else if(A.zepto.isZ(e))return i=i.concat(e.get());i=i.concat(J.fragment(e))}),i;else return"object"==n||null==e?e:J.fragment(e)}),a=this.length>1;if(s.length<1)return this;else return this.each(function(t,n){o=r?n:n.parentNode,n=0==i?n.nextSibling:1==i?n.firstChild:2==i?n:null;var u=A.contains(D.documentElement,o);s.forEach(function(t){if(a)t=t.cloneNode(!0);else if(!o)return A(t).remove();if(o.insertBefore(t,n),u)E(t,function(t){if(!(null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src)){var n=t.ownerDocument?t.ownerDocument.defaultView:e;n.eval.call(n,t.innerHTML)}})})})},A.fn[r?n+"To":"insert"+(i?"Before":"After")]=function(e){return A(e)[n](this),this}}),J.Z.prototype=m.prototype=A.fn,J.uniq=N,J.deserializeValue=w,A.zepto=J,A}();return e.Zepto=t,void 0===e.$&&(e.$=t),function(t){function n(e){return e._zid||(e._zid=d++)}function i(e,t,i,s){if(t=r(t),t.ns)var a=o(t.ns);return(y[n(e)]||[]).filter(function(e){return e&&(!t.e||e.e==t.e)&&(!t.ns||a.test(e.ns))&&(!i||n(e.fn)===n(i))&&(!s||e.sel==s)})}function r(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function o(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function s(e,t){return e.del&&!b&&e.e in x||!!t}function a(e){return w[e]||b&&x[e]||e}function u(e,i,o,u,l,f,d){var h=n(e),m=y[h]||(y[h]=[]);i.split(/\s/).forEach(function(n){if("ready"==n)return t(document).ready(o);var i=r(n);if(i.fn=o,i.sel=l,i.e in w)o=function(e){var n=e.relatedTarget;if(!n||n!==this&&!t.contains(this,n))return i.fn.apply(this,arguments)};i.del=f;var h=f||o;if(i.proxy=function(t){if(t=c(t),!t.isImmediatePropagationStopped()){t.data=u;var n=h.apply(e,t._args==p?[t]:[t].concat(t._args));if(n===!1)t.preventDefault(),t.stopPropagation();return n}},i.i=m.length,m.push(i),"addEventListener"in e)e.addEventListener(a(i.e),i.proxy,s(i,d))})}function l(e,t,r,o,u){var l=n(e);(t||"").split(/\s/).forEach(function(t){i(e,t,r,o).forEach(function(t){if(delete y[l][t.i],"removeEventListener"in e)e.removeEventListener(a(t.e),t.proxy,s(t,u))})})}function c(e,n){if(n||!e.isDefaultPrevented)if(n||(n=e),t.each(A,function(t,i){var r=n[t];e[t]=function(){return this[i]=E,r&&r.apply(n,arguments)},e[i]=T}),e.timeStamp||(e.timeStamp=Date.now()),n.defaultPrevented!==p?n.defaultPrevented:"returnValue"in n?n.returnValue===!1:n.getPreventDefault&&n.getPreventDefault())e.isDefaultPrevented=E;return e}function f(e){var t,n={originalEvent:e};for(t in e)if(!C.test(t)&&e[t]!==p)n[t]=e[t];return c(n,e)}var p,d=1,h=Array.prototype.slice,m=t.isFunction,v=function(e){return"string"==typeof e},y={},g={},b="onfocusin"in e,x={focus:"focusin",blur:"focusout"},w={mouseenter:"mouseover",mouseleave:"mouseout"};g.click=g.mousedown=g.mouseup=g.mousemove="MouseEvents",t.event={add:u,remove:l},t.proxy=function(e,i){var r=2 in arguments&&h.call(arguments,2);if(m(e)){var o=function(){return e.apply(i,r?r.concat(h.call(arguments)):arguments)};return o._zid=n(e),o}else if(v(i))if(r)return r.unshift(e[i],e),t.proxy.apply(null,r);else return t.proxy(e[i],e);else throw new TypeError("expected function")},t.fn.bind=function(e,t,n){return this.on(e,t,n)},t.fn.unbind=function(e,t){return this.off(e,t)},t.fn.one=function(e,t,n,i){return this.on(e,t,n,i,1)};var E=function(){return!0},T=function(){return!1},C=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,A={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};t.fn.delegate=function(e,t,n){return this.on(t,e,n)},t.fn.undelegate=function(e,t,n){return this.off(t,e,n)},t.fn.live=function(e,n){return t(document.body).delegate(this.selector,e,n),this},t.fn.die=function(e,n){return t(document.body).undelegate(this.selector,e,n),this},t.fn.on=function(e,n,i,r,o){var s,a,c=this;if(e&&!v(e))return t.each(e,function(e,t){c.on(e,n,i,t,o)}),c;if(!v(n)&&!m(r)&&r!==!1)r=i,i=n,n=p;if(r===p||i===!1)r=i,i=p;if(r===!1)r=T;return c.each(function(c,p){if(o)s=function(e){return l(p,e.type,r),r.apply(this,arguments)};if(n)a=function(e){var i,o=t(e.target).closest(n,p).get(0);if(o&&o!==p)return i=t.extend(f(e),{currentTarget:o,liveFired:p}),(s||r).apply(o,[i].concat(h.call(arguments,1)))};u(p,e,r,i,n,a||s)})},t.fn.off=function(e,n,i){var r=this;if(e&&!v(e))return t.each(e,function(e,t){r.off(e,n,t)}),r;if(!v(n)&&!m(i)&&i!==!1)i=n,n=p;if(i===!1)i=T;return r.each(function(){l(this,e,i,n)})},t.fn.trigger=function(e,n){return e=v(e)||t.isPlainObject(e)?t.Event(e):c(e),e._args=n,this.each(function(){if(e.type in x&&"function"==typeof this[e.type])this[e.type]();else if("dispatchEvent"in this)this.dispatchEvent(e);else t(this).triggerHandler(e,n)})},t.fn.triggerHandler=function(e,n){var r,o;return this.each(function(s,a){r=f(v(e)?t.Event(e):e),r._args=n,r.target=a,t.each(i(a,e.type||e),function(e,t){if(o=t.proxy(r),r.isImmediatePropagationStopped())return!1})}),o},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(e){t.fn[e]=function(t){return 0 in arguments?this.bind(e,t):this.trigger(e)}}),t.Event=function(e,t){if(!v(e))t=e,e=t.type;var n=document.createEvent(g[e]||"Events"),i=!0;if(t)for(var r in t)"bubbles"==r?i=!!t[r]:n[r]=t[r];return n.initEvent(e,i,!0),c(n)}}(t),function(t){function n(e,n,i){var r=t.Event(n);return t(e).trigger(r,i),!r.isDefaultPrevented()}function i(e,t,i,r){if(e.global)return n(t||x,i,r)}function r(e){if(e.global&&0===t.active++)i(e,null,"ajaxStart")}function o(e){if(e.global&&!--t.active)i(e,null,"ajaxStop")}function s(e,t){var n=t.context;if(t.beforeSend.call(n,e,t)===!1||i(t,n,"ajaxBeforeSend",[e,t])===!1)return!1;else return void i(t,n,"ajaxSend",[e,t])}function a(e,t,n,r){var o=n.context,s="success";if(n.success.call(o,e,s,t),r)r.resolveWith(o,[e,s,t]);i(n,o,"ajaxSuccess",[t,n,e]),l(s,t,n)}function u(e,t,n,r,o){var s=r.context;if(r.error.call(s,n,t,e),o)o.rejectWith(s,[n,t,e]);i(r,s,"ajaxError",[n,r,e||t]),l(t,n,r)}function l(e,t,n){var r=n.context;n.complete.call(r,t,e),i(n,r,"ajaxComplete",[t,n]),o(n)}function c(e,t,n){if(n.dataFilter==f)return e;var i=n.context;return n.dataFilter.call(i,e,t)}function f(){}function p(e){if(e)e=e.split(";",2)[0];return e&&(e==A?"html":e==C?"json":E.test(e)?"script":T.test(e)&&"xml")||"text"}function d(e,t){if(""==t)return e;else return(e+"&"+t).replace(/[&?]{1,2}/,"?")}function h(e){if(e.processData&&e.data&&"string"!=t.type(e.data))e.data=t.param(e.data,e.traditional);if(e.data&&(!e.type||"GET"==e.type.toUpperCase()||"jsonp"==e.dataType))e.url=d(e.url,e.data),e.data=void 0}function m(e,n,i,r){if(t.isFunction(n))r=i,i=n,n=void 0;if(!t.isFunction(i))r=i,i=void 0;return{url:e,data:n,success:i,dataType:r}}function v(e,n,i,r){var o,s=t.isArray(n),a=t.isPlainObject(n);t.each(n,function(n,u){if(o=t.type(u),r)n=i?r:r+"["+(a||"object"==o||"array"==o?n:"")+"]";if(!r&&s)e.add(u.name,u.value);else if("array"==o||!i&&"object"==o)v(e,u,i,n);else e.add(n,u)})}var y,g,b=+new Date,x=e.document,w=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,E=/^(?:text|application)\/javascript/i,T=/^(?:text|application)\/xml/i,C="application/json",A="text/html",_=/^\s*$/,S=x.createElement("a");S.href=e.location.href,t.active=0,t.ajaxJSONP=function(n,i){if(!("type"in n))return t.ajax(n);var r,o,l=n.jsonpCallback,c=(t.isFunction(l)?l():l)||"Zepto"+b++,f=x.createElement("script"),p=e[c],d=function(e){t(f).triggerHandler("error",e||"abort")},h={abort:d};if(i)i.promise(h);if(t(f).on("load error",function(s,l){if(clearTimeout(o),t(f).off().remove(),"error"==s.type||!r)u(null,l||"error",h,n,i);else a(r[0],h,n,i);if(e[c]=p,r&&t.isFunction(p))p(r[0]);p=r=void 0}),s(h,n)===!1)return d("abort"),h;if(e[c]=function(){r=arguments},f.src=n.url.replace(/\?(.+)=\?/,"?$1="+c),x.head.appendChild(f),n.timeout>0)o=setTimeout(function(){d("timeout")},n.timeout);return h},t.ajaxSettings={type:"GET",beforeSend:f,success:f,error:f,complete:f,context:null,global:!0,xhr:function(){return new e.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:C,xml:"application/xml, text/xml",html:A,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0,dataFilter:f},t.ajax=function(n){var i,o,l=t.extend({},n||{}),m=t.Deferred&&t.Deferred();for(y in t.ajaxSettings)if(void 0===l[y])l[y]=t.ajaxSettings[y];if(r(l),!l.crossDomain)i=x.createElement("a"),i.href=l.url,i.href=i.href,l.crossDomain=S.protocol+"//"+S.host!=i.protocol+"//"+i.host;if(!l.url)l.url=e.location.toString();if((o=l.url.indexOf("#"))>-1)l.url=l.url.slice(0,o);h(l);var v=l.dataType,b=/\?.+=\?/.test(l.url);if(b)v="jsonp";if(l.cache===!1||(!n||n.cache!==!0)&&("script"==v||"jsonp"==v))l.url=d(l.url,"_="+Date.now());if("jsonp"==v){if(!b)l.url=d(l.url,l.jsonp?l.jsonp+"=?":l.jsonp===!1?"":"callback=?");return t.ajaxJSONP(l,m)}var w,E=l.accepts[v],T={},C=function(e,t){T[e.toLowerCase()]=[e,t]},A=/^([\w-]+:)\/\//.test(l.url)?RegExp.$1:e.location.protocol,N=l.xhr(),L=N.setRequestHeader;if(m)m.promise(N);if(!l.crossDomain)C("X-Requested-With","XMLHttpRequest");if(C("Accept",E||"*/*"),E=l.mimeType||E){if(E.indexOf(",")>-1)E=E.split(",",2)[0];N.overrideMimeType&&N.overrideMimeType(E)}if(l.contentType||l.contentType!==!1&&l.data&&"GET"!=l.type.toUpperCase())C("Content-Type",l.contentType||"application/x-www-form-urlencoded");if(l.headers)for(g in l.headers)C(g,l.headers[g]);if(N.setRequestHeader=C,N.onreadystatechange=function(){if(4==N.readyState){N.onreadystatechange=f,clearTimeout(w);var e,n=!1;if(N.status>=200&&N.status<300||304==N.status||0==N.status&&"file:"==A){if(v=v||p(l.mimeType||N.getResponseHeader("content-type")),"arraybuffer"==N.responseType||"blob"==N.responseType)e=N.response;else{e=N.responseText;try{if(e=c(e,v,l),"script"==v)(0,eval)(e);else if("xml"==v)e=N.responseXML;else if("json"==v)e=_.test(e)?null:t.parseJSON(e)}catch(e){n=e}if(n)return u(n,"parsererror",N,l,m)}a(e,N,l,m)}else u(N.statusText||null,N.status?"error":"abort",N,l,m)}},s(N,l)===!1)return N.abort(),u(null,"abort",N,l,m),N;var k="async"in l?l.async:!0;if(N.open(l.type,l.url,k,l.username,l.password),l.xhrFields)for(g in l.xhrFields)N[g]=l.xhrFields[g];for(g in T)L.apply(N,T[g]);if(l.timeout>0)w=setTimeout(function(){N.onreadystatechange=f,N.abort(),u(null,"timeout",N,l,m)},l.timeout);return N.send(l.data?l.data:null),N},t.get=function(){return t.ajax(m.apply(null,arguments))},t.post=function(){var e=m.apply(null,arguments);return e.type="POST",t.ajax(e)},t.getJSON=function(){var e=m.apply(null,arguments);return e.dataType="json",t.ajax(e)},t.fn.load=function(e,n,i){if(!this.length)return this;var r,o=this,s=e.split(/\s/),a=m(e,n,i),u=a.success;if(s.length>1)a.url=s[0],r=s[1];return a.success=function(e){o.html(r?t("<div>").html(e.replace(w,"")).find(r):e),u&&u.apply(o,arguments)},t.ajax(a),this};var N=encodeURIComponent;t.param=function(e,n){var i=[];return i.add=function(e,n){if(t.isFunction(n))n=n();if(null==n)n="";this.push(N(e)+"="+N(n))},v(i,e,n),i.join("&").replace(/%20/g,"+")}}(t),function(){try{getComputedStyle(void 0)}catch(n){var t=getComputedStyle;e.getComputedStyle=function(e,n){try{return t(e,n)}catch(e){return null}}}}(),function(e){e.fn.serializeArray=function(){var t,n,i=[],r=function(e){if(e.forEach)return e.forEach(r);else return void i.push({name:t,value:e})};if(this[0])e.each(this[0].elements,function(i,o){if(n=o.type,t=o.name,t&&"fieldset"!=o.nodeName.toLowerCase()&&!o.disabled&&"submit"!=n&&"reset"!=n&&"button"!=n&&"file"!=n&&("radio"!=n&&"checkbox"!=n||o.checked))r(e(o).val())});return i},e.fn.serialize=function(){var e=[];return this.serializeArray().forEach(function(t){e.push(encodeURIComponent(t.name)+"="+encodeURIComponent(t.value))}),e.join("&")},e.fn.submit=function(t){if(0 in arguments)this.bind("submit",t);else if(this.length){var n=e.Event("submit");if(this.eq(0).trigger(n),!n.isDefaultPrevented())this.get(0).submit()}return this}}(t),function(e,t){function n(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}function i(e){return r?r+e:e.toLowerCase()}var r,o,s,a,u,l,c,f,p,d,h="",m={Webkit:"webkit",Moz:"",O:"o"},v=document.createElement("div"),y=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,g={};if(v.style.transform===t)e.each(m,function(e,n){if(v.style[e+"TransitionProperty"]!==t)return h="-"+e.toLowerCase()+"-",r=n,!1});o=h+"transform",g[s=h+"transition-property"]=g[a=h+"transition-duration"]=g[l=h+"transition-delay"]=g[u=h+"transition-timing-function"]=g[c=h+"animation-name"]=g[f=h+"animation-duration"]=g[d=h+"animation-delay"]=g[p=h+"animation-timing-function"]="",e.fx={off:r===t&&v.style.transitionProperty===t,speeds:{_default:400,fast:200,slow:600},cssPrefix:h,transitionEnd:i("TransitionEnd"),animationEnd:i("AnimationEnd")},e.fn.animate=function(n,i,r,o,s){if(e.isFunction(i))o=i,r=t,i=t;if(e.isFunction(r))o=r,r=t;if(e.isPlainObject(i))r=i.easing,o=i.complete,s=i.delay,i=i.duration;if(i)i=("number"==typeof i?i:e.fx.speeds[i]||e.fx.speeds._default)/1e3;if(s)s=parseFloat(s)/1e3;return this.anim(n,i,r,o,s)},e.fn.anim=function(i,r,h,m,v){var b,x,w,E={},T="",C=this,A=e.fx.transitionEnd,_=!1;if(r===t)r=e.fx.speeds._default/1e3;if(v===t)v=0;if(e.fx.off)r=0;if("string"==typeof i)E[c]=i,E[f]=r+"s",E[d]=v+"s",E[p]=h||"linear",A=e.fx.animationEnd;else{x=[];for(b in i)if(y.test(b))T+=b+"("+i[b]+") ";else E[b]=i[b],x.push(n(b));if(T)E[o]=T,x.push(o);if(r>0&&"object"==typeof i)E[s]=x.join(", "),E[a]=r+"s",E[l]=v+"s",E[u]=h||"linear"}if(w=function(t){if("undefined"!=typeof t){if(t.target!==t.currentTarget)return;e(t.target).unbind(A,w)}else e(this).unbind(A,w);_=!0,e(this).css(g),m&&m.call(this)},r>0)this.bind(A,w),setTimeout(function(){if(!_)w.call(C)},1e3*(r+v)+25);if(this.size()&&this.get(0).clientLeft,this.css(E),r<=0)setTimeout(function(){C.each(function(){w.call(this)})},0);return this},v=null}(t),function(t,n){function i(e,i,r,o,s){if("function"==typeof i&&!s)s=i,i=n;var a={opacity:r};if(o)a.scale=o,e.css(t.fx.cssPrefix+"transform-origin","0 0");return e.animate(a,i,null,s)}function r(e,n,r,o){return i(e,n,0,r,function(){a.call(t(this)),o&&o.call(this)})}var o=e.document,s=(o.documentElement,t.fn.show),a=t.fn.hide,u=t.fn.toggle;t.fn.show=function(e,t){if(s.call(this),e===n)e=0;else this.css("opacity",0);return i(this,e,1,"1,1",t)},t.fn.hide=function(e,t){if(e===n)return a.call(this);else return r(this,e,"0,0",t)},t.fn.toggle=function(e,i){if(e===n||"boolean"==typeof e)return u.call(this,e);else return this.each(function(){var n=t(this);n["none"==n.css("display")?"show":"hide"](e,i)})},t.fn.fadeTo=function(e,t,n){return i(this,e,t,null,n)},t.fn.fadeIn=function(e,t){var n=this.css("opacity");if(n>0)this.css("opacity",0);else n=1;return s.call(this).fadeTo(e,n,t)},t.fn.fadeOut=function(e,t){return r(this,e,null,t)},t.fn.fadeToggle=function(e,n){return this.each(function(){var i=t(this);i[0==i.css("opacity")||"none"==i.css("display")?"fadeIn":"fadeOut"](e,n)})}}(t),t}),define("naboo",[],function(){function e(){this.steps=[],this._index=-1,this._handlers={},this.canceled=!1}return e.prototype.start=function(e){if(e)this.on("end",e);return this.trigger("start"),this.next(this),this},e.prototype.next=function(){if(!this.canceled)if(this._index++,this._index>=this.steps.length)this.trigger("end");else{var e=this.steps[this._index];e.call(this)}},e.prototype.cancel=function(){this.canceled=!0},e.prototype.on=function(e,t){this._handlers[e]||(this._handlers[e]=[]),this._handlers[e].push(t)},e.prototype.off=function(e,t){if(!e)this._handlers={};else{var n=this._handlers[e];if(!t)this._handlers[e]=[];else if("[object Array]"===Object.prototype.toString.call(n)){for(var i=0,r=n.length;i<r&&n[i]!==t;i++);this._handlers[e].splice(i,1)}}},e.prototype.trigger=function(e,t){var n=this._handlers[e];if(n)n.forEach(function(e,n){e.call(null,t)})},e.register=function(t,n){e[t]=function(){var n=new e;return n[t].apply(n,arguments),n},e.prototype[t]=function(){var e=Array.prototype.slice.call(arguments,0);return e.unshift(this.next.bind(this)),this.steps.push(function(){n.apply(this,e)}),this}},e.register("p",function(e){var t=Array.prototype.slice.call(arguments,1),n=t.length;t.forEach(function(t){t.start(function(){if(n--,0===n)e()})})}),e.register("done",function(e,t){t(e)}),e.tool=function(){function e(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}function t(e){return s?s+e:e.toLowerCase()}function n(t,n){var i="";for(var r in n)if(!n[r]&&0!==n[r])t.style.removeProperty(e(r));else i+=e(r)+":"+n[r]+";";t.style.cssText+=";"+i}function i(e,t){if(t!==+t)return t;u.style[e]=0;var n=u.style[e],i=n.match&&n.match(/^\d+([a-zA-Z]+)/);if(i)return t+i[1];else return t}function r(e){var t;if(void 0!==u.style[e])t=e;else for(var n in a){var i="-"+a[n]+"-";if(void 0!==u.style[i+e]){t=i+e;break}}return t}var o="",s="",a={Webkit:"webkit",Moz:"",O:"o"},u=document.createElement("div");if(void 0===u.style.transform)for(var l in a)if(void 0!==u.style[l+"TransitionProperty"]){o="-"+l.toLowerCase()+"-",s=a[l];break}var c=void 0===s&&void 0===u.style.transitionProperty;return{prefix:o,dasherize:e,normalizeEvent:t,off:c,setCss:n,handleUnit:i,getPropName:r}}(),e.transition=function(){var t=e.tool.prefix,n=t+"transition-property",i=t+"transition-duration",r=t+"transition-delay",o=t+"transition-timing-function",s=e.tool.normalizeEvent("TransitionEnd"),a={};return a[n]="",a[i]="",a[r]="",a[o]="",function(t,u,l){if(t&&"[object Object]"===Object.prototype.toString.call(u)){l=l||{};var c=parseInt(l.duration)||400,f=["ease","linear","ease-in","ease-out","ease-in-out"],p=f.indexOf(l.ease)>-1?l.ease:"ease",d=parseInt(l.delay)||0,h="function"==typeof l.cb?l.cb:function(){},m=t.getAttribute("data-naboo");if(m!==+m)m=0;if(t.setAttribute("data-naboo",m+1),e.tool.off)c=0;c=Math.max(c,0),c/=1e3,d/=1e3;var v=[],y={};for(var g in u)if(u.hasOwnProperty(g)){var b=g;g=e.tool.getPropName(g);var x=e.tool.handleUnit(g,u[b]);y[g]=x,v.push(e.tool.dasherize(g))}else;if(c>0){var w=t.style[n];w&&(w+=", "),y[n]=w+v.join(", ");var E=t.style[i];if(E||0===parseInt(E))E+=", ";y[i]=E+c+"s";var T=t.style[o];T&&(T+=", "),y[o]=T+p;var C=t.style[r];if(C||0===parseInt(C))C+=", ";y[r]=C+d+"s"}var A=!1,_=e.tool.setCss,S=function(e){if(!e||e.elapsedTime===c+d){if("undefined"!=typeof e){if(e.target!==e.currentTarget)return;e.target.removeEventListener(s,S)}else t.removeEventListener(s,S);A=!0,t.setAttribute("data-naboo",+t.getAttribute("data-naboo")-1),0===+t.getAttribute("data-naboo")&&_(t,a),h&&h()}};c>0&&t.addEventListener(s,S),setTimeout(function(){if(!A)S()},1e3*(c+d)+25),t.clientLeft,_(t,y)}}}(),e.register("animate",function(t,n,i,r){r=r||{};var o=r.cb;r.cb=function(){o&&o(),t()},r.mode=["transition"].indexOf(r.mode)>-1?r.mode:"transition",e[r.mode](n,i,r)}),e}),function(e,t){if("function"==typeof define&&define.amd)define("fetch-jsonp",["exports","module"],t);else if("undefined"!=typeof exports&&"undefined"!=typeof module)t(exports,module);else{var n={exports:{}};t(n.exports,n),e.fetchJsonp=n.exports}}(this,function(e,t){"use strict";function n(){return"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random())}function i(e){try{delete window[e]}catch(t){window[e]=void 0}}function r(e){var t=document.getElementById(e);document.getElementsByTagName("head")[0].removeChild(t)}function o(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o=e,a=t.timeout||s.timeout,u=t.jsonpCallback||s.jsonpCallback,l=void 0;return new Promise(function(e,s){var c=t.jsonpCallbackFunction||n(),f=u+"_"+c;window[c]=function(t){if(e({ok:!0,json:function(){return Promise.resolve(t)}}),l)clearTimeout(l);r(f),i(c)},o+=o.indexOf("?")===-1?"?":"&";var p=document.createElement("script");p.setAttribute("src",""+o+u+"="+c),p.id=f,document.getElementsByTagName("head")[0].appendChild(p),l=setTimeout(function(){s(new Error("JSONP request to "+o+" timed out")),i(c),r(f)},a)})}var s={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};t.exports=o}),define("fetch",["require","util"],function(e){"use strict";function t(){var t=e("util").platform;if(t.isQQ())return!1;else return!0}function n(e){if("string"!=typeof e)e=String(e);if(/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function i(e){if("string"!=typeof e)e=String(e);return e}function r(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};if(g.iterable)t[Symbol.iterator]=function(){return t};return t}function o(e){if(this.map={},e instanceof o)e.forEach(function(e,t){this.append(t,e)},this);else if(e)Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function s(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));else return void(e.bodyUsed=!0)}function a(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function u(e){var t=new FileReader,n=a(t);return t.readAsArrayBuffer(e),n}function l(e){var t=new FileReader,n=a(t);return t.readAsText(e),n}function c(e){for(var t=new Uint8Array(e),n=new Array(t.length),i=0;i<t.length;i++)n[i]=String.fromCharCode(t[i]);return n.join("")}function f(e){if(e.slice)return e.slice(0);else{var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}}function p(){if(this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,!e)this._bodyText="";else if("string"==typeof e)this._bodyText=e;else if(g.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(g.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(g.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(g.arrayBuffer&&g.blob&&x(e))this._bodyArrayBuffer=f(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else if(g.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||w(e)))this._bodyArrayBuffer=f(e);else throw new Error("unsupported BodyInit type");if(!this.headers.get("content-type"))if("string"==typeof e)this.headers.set("content-type","text/plain;charset=UTF-8");else if(this._bodyBlob&&this._bodyBlob.type)this.headers.set("content-type",this._bodyBlob.type);else if(g.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8")},g.blob)this.blob=function(){var e=s(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);else if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));else if(this._bodyFormData)throw new Error("could not read FormData body as blob");else return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer)return s(this)||Promise.resolve(this._bodyArrayBuffer);else return this.blob().then(u)};if(this.text=function(){var e=s(this);if(e)return e;if(this._bodyBlob)return l(this._bodyBlob);else if(this._bodyArrayBuffer)return Promise.resolve(c(this._bodyArrayBuffer));else if(this._bodyFormData)throw new Error("could not read FormData body as text");else return Promise.resolve(this._bodyText)},g.formData)this.formData=function(){return this.text().then(m)};return this.json=function(){return this.text().then(JSON.parse)},this}function d(e){var t=e.toUpperCase();return E.indexOf(t)>-1?t:e}function h(e,t){t=t||{};var n=t.body;if("string"==typeof e)this.url=e;else{if(e.bodyUsed)throw new TypeError("Already read");if(this.url=e.url,this.credentials=e.credentials,!t.headers)this.headers=new o(e.headers);if(this.method=e.method,this.mode=e.mode,!n&&null!=e._bodyInit)n=e._bodyInit,e.bodyUsed=!0}if(this.credentials=t.credentials||this.credentials||"omit",t.headers||!this.headers)this.headers=new o(t.headers);if(this.method=d(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function m(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),i=n.shift().replace(/\+/g," "),r=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(i),decodeURIComponent(r))}}),t}function v(e){var t=new o;return e.split("\r\n").forEach(function(e){var n=e.split(":"),i=n.shift().trim();if(i){var r=n.join(":").trim();t.append(i,r)}}),t}function y(e,t){if(!t)t={};this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new o(t.headers),this.url=t.url||"",this._initBody(e)}if(!self.fetch||!t()){var g={searchParams:"URLSearchParams"in self,iterable:"Symbol"in self&&"iterator"in Symbol,blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};if(g.arrayBuffer)var b=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],x=function(e){return e&&DataView.prototype.isPrototypeOf(e)},w=ArrayBuffer.isView||function(e){return e&&b.indexOf(Object.prototype.toString.call(e))>-1};if(o.prototype.append=function(e,t){e=n(e),t=i(t);var r=this.map[e];this.map[e]=r?r+","+t:t},o.prototype.delete=function(e){delete this.map[n(e)]},o.prototype.get=function(e){return e=n(e),this.has(e)?this.map[e]:null},o.prototype.has=function(e){return this.map.hasOwnProperty(n(e))},o.prototype.set=function(e,t){this.map[n(e)]=i(t)},o.prototype.forEach=function(e,t){for(var n in this.map)if(this.map.hasOwnProperty(n))e.call(t,this.map[n],n,this)},o.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),r(e)},o.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),r(e)},o.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),r(e)},g.iterable)o.prototype[Symbol.iterator]=o.prototype.entries;var E=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];h.prototype.clone=function(){return new h(this,{body:this._bodyInit})},p.call(h.prototype),p.call(y.prototype),y.prototype.clone=function(){return new y(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},y.error=function(){var e=new y(null,{status:0,statusText:""});return e.type="error",e};var T=[301,302,303,307,308];y.redirect=function(e,t){if(T.indexOf(t)===-1)throw new RangeError("Invalid status code");return new y(null,{status:t,headers:{location:e}})},self.Headers=o,self.Request=h,self.Response=y,self.fetch=function(e,t){return new Promise(function(n,i){var r=new h(e,t),o=new XMLHttpRequest;if(o.onload=function(){var e={status:o.status,statusText:o.statusText,headers:v(o.getAllResponseHeaders()||"")};e.url="responseURL"in o?o.responseURL:e.headers.get("X-Request-URL");var t="response"in o?o.response:o.responseText;n(new y(t,e))},o.onerror=function(){i(new TypeError("Network request failed"))},o.ontimeout=function(){i(new TypeError("Network request failed"))},o.open(r.method,r.url,!0),"include"===r.credentials)o.withCredentials=!0;if("responseType"in o&&g.blob)o.responseType="blob";r.headers.forEach(function(e,t){o.setRequestHeader(t,e)}),o.send("undefined"==typeof r._bodyInit?null:r._bodyInit)})},self.fetch.polyfill=!0}}),define("util",["require","./utils/fn","./dom/dom","./dom/event","./dom/rect","./dom/css","./utils/gesture","./utils/event-emitter","./utils/platform","./utils/customStorage","naboo"],function(e){"use strict";function t(e,t){if(n.indexOf("mipcache.bdstatic.com")<0||e&&e.length<8||0!=e.indexOf("http")&&0!=e.indexOf("//"))return e;var i="img"===t?"/i/":"/c/";if(0==e.indexOf("//")||0==e.indexOf("https"))i+="s/";var r=e.split("//");return r.shift(),e=r.join("//"),i+e}var n=location.href;return{makeCacheUrl:t,fn:e("./utils/fn"),dom:e("./dom/dom"),event:e("./dom/event"),rect:e("./dom/rect"),css:e("./dom/css"),Gesture:e("./utils/gesture"),EventEmitter:e("./utils/event-emitter"),platform:e("./utils/platform").start(),customStorage:e("./utils/customStorage"),naboo:e("naboo")}}),define("utils/fn",["require"],function(e){"use strict";function t(e,t){function n(){o=0,s=Date.now(),e.apply(i,r)}var i,r,o,s=0;return!t&&(t=10),function(){var e=Date.now()-s;if(i=this,r=arguments,clearTimeout(o),e>=t)n();else o=setTimeout(n,t-e)}}function n(e){for(var t=Object.keys(e),n=t.length,i=[],r=0;r<n;r++)i.push(e[t[r]]);return i}function i(e){return!!e&&Object.getPrototypeOf(e)==Object.prototype}function r(e,t,n){for(var o in t)if(n){if(i(t[o]))!i(e[o])&&(e[o]={});else if(Array.isArray(t[o]))!Array.isArray(e[o])&&(e[o]=[]);else{void 0!==t[o]&&(e[o]=t[o]);continue}r(e[o],t[o],n)}else if(void 0!==t[o])e[o]=t[o]}function o(e){var t="boolean"==typeof e,n=!1;if(t)n=e,e=arguments[1];for(var i=t?2:1;i<arguments.length;i++)r(e,arguments[i],n);return e}function s(e){var t=arguments[1],n={};if(!Array.isArray(t))t=Array.prototype.slice.call(arguments,1);for(var i=0;i<t.length;i++){var r=t[i];if(r in e)n[r]=e[r]}return n}function a(e){if(!e)return!1;else return"[object String]"===Object.prototype.toString.call(e)}function u(e,t){if(e&&e[t])try{delete e[t]}catch(n){e[t]=void 0}}return{throttle:t,values:n,extend:o,pick:s,isPlainObject:i,isString:a,del:u}}),define("dom/dom",["require"],function(e){"use strict";function t(e,t){if(!e||1!=e.nodeType)return!1;else return o.call(e,t)}function n(e,t,n){var i=s(e,t);return a(n,i)?i:null}function i(e){if(u.innerHTML=e,!u.children.length)return null;var t=Array.prototype.slice.call(u.children);return u.innerHTML="",t.length>1?t:t[0]}var r=document.documentElement,o=r.matches||r.webkitMatchesSelector||r.mozMatchesSelector||r.oMatchesSelector||r.msMatchesSelector||r.matchesSelector,s=r.closest?function(e,t){return e.closest(t)}:function(e,n){for(;e;){if(t(e,n))return e;e=e.parentNode}return null},a=r.contains?function(e,t){return e&&e.contains(t)}:function(e,t){for(;t;){if(e===t)return!0;t=t.parentElement}return!1},u=document.createElement("div");return{closest:s,closestTo:n,matches:t,contains:a,create:i}}),define("dom/event",["require","./dom"],function(e){"use strict";function t(e,t,n,r,o){function s(e){var n=e.target,o=i.closestTo(n,t,this);if(o)r.call(o,e)}return o=!!o,e.addEventListener(n,s,o),function(){e.removeEventListener(n,s),s=e=r=null}}function n(e,t){
var n=document.createEvent(r[e]||"Event");return n.initEvent(e,!0,!0),t&&(n.data=t),n}var i=e("./dom"),r={};return r.click=r.mousedown=r.mouseup=r.mousemove="MouseEvents",{delegate:t,create:n}}),define("dom/rect",["require","../utils/platform"],function(e){"use strict";function t(e){if(n.needSpecialScroll&&window!==top){var t=document.createElement("div");return t.style.cssText=e?"position:absolute;width:0;height:0;visibility:hidden;":"position:absolute;top:0;left:0;width:0;height:0;visibility:hidden;",i.appendChild(t),t}return null}var n=e("../utils/platform").start(),i=document.body,r=document.documentElement,o=Math.round,s=t(),a=t(),u=t(!0),l={get:function(e,t,n,i){return e=o(e),t=o(t),n=o(n),i=o(i),{left:e,top:t,width:n,height:i,right:e+n,bottom:t+i}},scrollingElement:document.scrollingElement||n.isWebkit()&&i||r,getElementRect:function(e){var t=e.getBoundingClientRect();return this.get(t.left+this.getScrollLeft(),t.top+this.getScrollTop(),t.width,t.height)},getElementOffset:function(e){var t=e.getBoundingClientRect();return{left:o(t.left),top:o(t.top),width:o(t.width),height:o(t.height)}},getScrollLeft:function(){return o(s&&-s.getBoundingClientRect().left||this.scrollingElement.scrollLeft||pageXOffset||0)},getScrollTop:function(){return o(s&&-s.getBoundingClientRect().top||this.scrollingElement.scrollTop||pageYOffset||0)},setScrollTop:function(e){if(a)a.style.top=e+"px",a.scrollIntoView(!0);else this.scrollingElement.scrollTop=e},getScrollHeight:function(){if(u&&u!=i.lastElementChild)i.appendChild(u);return o(u?u.offsetTop:this.scrollingElement.scrollHeight)},getScrollWidth:function(){return window.innerWidth},overlapping:function(e,t){return e.top<=t.bottom&&t.top<=e.bottom&&e.left<=t.right&&t.left<=e.right}};return l}),define("utils/platform",["require"],function(e){"use strict";function t(){this.isIos=!1,this.isAndroid=!1,this.isWechatApp=!1,this.isBaiduApp=!1,this.isWeiboApp=!1,this.isQQApp=!1,this.isUc=!1,this.isBaidu=!1,this.isQQ=!1,this.isAdr=!1,this.isSafari=!1,this.isChrome=!1,this.isFireFox=!1,this.isTrident=!1,this.isGecko=!1,this.isWebkit=!1}return t.prototype._matchOs=function(){if(/iPhone|iPad|iPod/i.test(this._ua()))this.isIos=!0;else if(/Android/i.test(this._ua()))this.isAndroid=!0},t.prototype._matchBrowser=function(){var e=this._ua().split("Mobile"),t=e&&e.length>1?e[1]:null;if(/\bmicromessenger\/([\d.]+)/i.test(t))this.isWechatApp=!0;else if(/baiduboxapp/i.test(t))this.isBaiduApp=!0;else if(/weibo/i.test(t))this.isWeiboApp=!0;else if(/\sQQ/i.test(t))this.isQQApp=!0;else if(/UCBrowser/i.test(this._ua()))this.isUc=!0;else if(/baidubrowser/i.test(this._ua()))this.isBaidu=!0;else if(/qqbrowser\/([0-9.]+)/i.test(this._ua()))this.isQQ=!0;else if(!/android/i.test(this._ua())&&/\bversion\/([0-9.]+(?: beta)?)(?: mobile(?:\/[a-z0-9]+)?)? safari\//i.test(this._ua()))this.isSafari=!0;else if(/(?:Chrome|CrMo|CriOS)\/([0-9]{1,2}\.[0-9]\.[0-9]{3,4}\.[0-9]+)/i.test(this._ua())&&!/samsung/i.test(this._ua()))this.isChrome=!0;else if(/(firefox|FxiOS+)\/([0-9.ab]+)/i.test(this._ua()))this.isFireFox=!0;else if(/android/i.test(this._ua())&&/Android[\s\_\-\/i686]?[\s\_\-\/](\d+[\.\-\_]\d+[\.\-\_]?\d*)/i.test(this._ua()))this.isAdr=!0},t.prototype._matchEngine=function(){if(/\b(?:msie |ie |trident\/[0-9].*rv[ :])([0-9.]+)/i.test(this._ua()))this.isTrident=!0;else if(/\brv:([\d\w.]+).*\bgecko\/(\d+)/i.test(this._ua()))this.isGecko=!0;else if(/\bapplewebkit[\/]?([0-9.+]+)/i.test(this._ua()))this.isWebkit=!0},t.prototype.getOsVersion=function(){var e,t;if(this.isAndroid()){if(t=/Android ([\.\_\d]+)/.exec(this._ua())||/Android\/([\d.]+)/.exec(this._ua()),t&&t.length>1)e=t[1]}else if(this.isIos())if(t=/OS (\d+)_(\d+)_?(\d+)?/.exec(this._appVersion()),t&&t.length>3)e=t[1]+"."+t[2]+"."+(0|t[3]);return e},t.prototype._wrapFun=function(){var e=this;for(var t in e)if(e.hasOwnProperty(t)&&"function"!=typeof e[t]){var n=function(e){return e}.bind(null,e[t]);e[t]=n}e.needSpecialScroll=e.isIos()&&window!==top},t.prototype._ua=function(){return navigator.userAgent},t.prototype._appVersion=function(){return navigator.appVersion},t.prototype.start=function(){return this._matchOs(),this._matchBrowser(),this._matchEngine(),this._wrapFun(),this},new t}),define("dom/css",["require"],function(e){"use strict";function t(e){if(e=e.replace(r,function(e,t,n){return t?n:n.toUpperCase()}),a[e])return a[e];if(!(e in o.style))for(var t=0;t<s.length;t++){var n=s[t]+e.charAt(0).toUpperCase()+e.slice(1);if(n in o.style){var i=n;break}}return a[e]=i||e}function n(e,t){if(t!==+t)return t;if(l[e])return t+l[e];o.style[e]=0;var n=o.style[e],i=n.match&&n.match(u);if(i)return t+(l[e]=i[1]);else return t}function i(e,r,o){var s;if(!r||!e)return e;if(e.length&&e[0])if(r&&void 0!==o){for(s=0;s<e.length;s++){var a=e[s];i(a,r,o)}return e}else{var u=[];for(s=0;s<e.length;s++)u.push(i(e[s],r));return u}if(!e.nodeType)return e;var a=e;if("string"!=typeof r||void 0!==o){var l;if("string"==typeof r)l=t(r),a.style[l]=n(l,o);else for(s in r)o=r[s],l=t(s),a.style[l]=n(l,o);return a}else return r=t(r),a.style[r]||document.defaultView.getComputedStyle(a)[r]}var r=/(?:(^-)|-)+(.)?/g,o=document.createElement("div"),s=["webkit","moz","ms","o","Webkit","Moz","O"],a={},u=/^\d+([a-zA-Z]+)/,l={};return i}),define("utils/gesture",["require","./event-emitter","./gesture/gesture-recognizer","./gesture/data-processor","./fn"],function(e){"use strict";function t(e){var t=this._opt;t.preventDefault&&e.preventDefault(),t.stopPropagation&&e.stopPropagation();var n=s.process(e,t.preventX,t.preventY);this._recognize(n),this.trigger(e.type,e,n)}function n(e,t,n,i){for(var r=t.split(" "),o=0;o<r.length;o++)if(i===!1)e.removeEventListener(r[o],n);else e.addEventListener(r[o],n,!1)}function i(e,i){this.__eventContext=this._element=e,i&&(this._opt=a.extend({},this._opt,i)),this._boundTouchEvent=t.bind(this),n(e,"touchstart touchmove touchend touchcancel",this._boundTouchEvent),this._recognizers={}}var r=e("./event-emitter"),o=e("./gesture/gesture-recognizer"),s=e("./gesture/data-processor"),a=e("./fn"),u=r.mixin(i.prototype);return u._opt={preventDefault:!1,stopPropagation:!1,preventX:!0,preventY:!1},u.cleanup=function(){var e=this._element;n(e,"touchstart touchmove touchend touchcancel",this._boundTouchEvent,!1),this.off()},u._createEventCallback=function(e){if(!this._hasRegister(e)){var t=o.getByEventname(e);if(t){e=t.recName;for(var n=this._recognizers[e]=new t(this),i=o.getConflictList(n.recName),r=0;r<i.length;r++){e=i[r];var s=this._recognizers[e];if(s)s.conflictList[n.recName]=n,n.conflictList[s.recName]=s}}}},u._removeEventCallback=function(e){var t;if(void 0===e)this._recognizers={};else if(t=this._recognizers[e]){for(var n in t.conflictList)delete t.conflictList[n][e];delete this._recognizers[e]}},u._hasRegister=function(e){return!!this._recognizers[o.getByEventname(e)]},u._recognize=function(e){var t=this._recognizers;for(var n in t){var i=t[n];i.recognize(e)}},i}),define("utils/event-emitter",["require"],function(e){"use strict";function t(e,t,n,r){if(i.test(n)){for(var o=n.split(i),s="function"!=typeof r,a=0;a<o.length;a++)s?t.apply(e,[o[a]].concat(r)):t.call(e,o[a],r);return!0}return!1}function n(e){if(e)e.context&&this.setEventContext(e.context),e.createEventCallback&&(this._createEventCallback=e.createEventCallback),e.removeEventCallback&&(this._removeEventCallback=e.removeEventCallback),e.bindEventCallback&&(this._bindEventCallback=e.bindEventCallback)}var i=/\s+/,r=n.prototype={on:function(e,n){if(t(this,this.on,e,n))return this;else return this._getEvent(e).push(n),this._bindEventCallback(e,n),this},off:function(e,n){if(!e){if(!n)this.off(Object.keys(this.__events).join(" "),n);return null}if(t(this,this.off,e,n))return null;if(n){var i=this._getEvent(e),r=i.indexOf(n);if(r>-1)i.splice(r,1)}if(!n||i&&0===i.length)delete this.__events[e],this._removeEventCallback(e);return e?this.__events&&this.__events[e]:null},once:function(e,t){var n=t.bind(this),i=this;return n.__once=!0,this.on(e,n),function(){i.off(e,n),n=i=null}},trigger:function(e){var n=Array.prototype.slice.call(arguments,1);if(t(this,this.trigger,e,n))return null;for(var i=this._getEvent(e),r=this.__eventContext||this,o=0;o<i.length;o++)if(i[o].apply(r,n),i[o].__once)i.splice(o,1)},setEventContext:function(e){this.__eventContext=e||this},_getEvent:function(e){if(!this.__events)this.__events={};if(!this.__events[e])this.__events[e]=[],this._createEventCallback(e,this.__events[e]);return this.__events[e]},_createEventCallback:function(e,t){},_removeEventCallback:function(e){},_bindEventCallback:function(e,t){}};["on bind","off unbind","once one","trigger fire emit"].forEach(function(e){for(var e=e.split(" "),t=1;t<e.length;t++)r[e[t]]=r[e[0]]});var o=Object.keys(r);return n.mixin=function(e){for(var t=0;t<o.length;t++)if(!(o[t]in e))e[o[t]]=r[o[t]];return e},n}),define("utils/gesture/gesture-recognizer",["require","../fn"],function(e){"use strict";function t(e){this._state=u,this.gesture=e,this.conflictList={}}function n(){this._state=f,this.emit()}function i(){t.apply(this,arguments),this.boundHoldTimeFn=n.bind(this)}function r(){i.apply(this,arguments)}function o(){t.apply(this,arguments)}var s=e("../fn"),a=(Math.abs,Object.create),u=1,l=2,c=3,f=4,p=5,d={start:u,wait:l,pending:c,end:f,hold:p},h={0:"",1:"up",2:"right",3:"down",4:"left"};s.extend(t.prototype,{name:"",eventList:[],needAutoReset:!0,level:0,recognize:function(e){var t=e.eventState;if("start"===t&&this._state===p)this._state=u,this.needAutoReset&&this.reset();if(this._state!==p){var n=this.process(e);if(this._state!==p)if(this._state=n,this.emitCheck())this.emit(e)}},isState:function(){for(var e=arguments,t=0;t<e.length;t++){var n="string"==typeof e[t]?d[e[t]]:e[t];if(n===this._state)return!0}return!1},setState:function(e){if(e="string"==typeof e?d[e]:e,e>0&&e<6)this._state=e;return this._state},emitCheck:function(){if(this._state===u||this._state===p)return!1;for(var e in this.conflictList){var t=this.conflictList[e];if(t.level>this.level&&this.conflictList[e].state!==p)return!1}return!0},process:function(e){return this._state},emit:function(e){},reset:function(){},hold:function(){return this._state=p},trigger:function(e){this.gesture.trigger(e.type,e.event,e)}});var m={},v={};return t.register=function(e,t){!e.conflictList&&(e.conflictList=[]),e.recName=e.prototype.recName=t,m[t]=e;for(var n=e.prototype.eventList,i=0;i<n.length;i++)v[n[i]]=e},t.getConflictList=function(e){return m[e]&&m[e].conflictList},t.get=function(e){return m[e]},t.getByEventname=function(e){return v[e]},t.conflict=function(e,n){if("string"==typeof e)e=t.get(e),n=t.get(n);if(e&&n)e.conflictList.push(n.recName),n.conflictList.push(e.recName)},i.prototype=s.extend(a(t.prototype),{eventList:["tap"],taps:1,count:0,holdTime:300,time:250,moveRange:10,level:1,needAutoReset:!1,process:function(e){if(e.deltaTime>this.time||e.distance>this.moveRange||e.pointers.length>1)return this.reset(),this.hold();if("start"===e.eventState)clearTimeout(this.holdTimer);if("end"!==e.eventState)return l;var t=this.preTime&&e.timeStamp-this.preTime;if(this.preTime=e.timeStamp,t<this.holdTime)this.count++;else this.count=1;if(this._data=e,this.count===this.taps)if(this.emitCheck())return f;else return this.holdTimer=setTimeout(this.boundHoldTimeFn,this.holdTime),l},reset:function(){this.preTime=null,this.count=0,this._state=u,clearTimeout(this.holdTimer)},emit:function(){if(this._state===f){var e=this._data,t=a(e);t.type=this.eventList[0],this._data=null,this.trigger(t),this.reset()}}}),r.prototype=s.extend(a(i.prototype),{taps:2,eventList:["doubletap"],level:2}),o.prototype=s.extend(a(t.prototype),{eventList:["swipe","swipeup","swiperight","swipeleft","swipedown"],velocity:.03,distance:30,duration:1e3,process:function(e){if(e.pointers.length>1||e.deltaTime>this.duration)return p;if("end"===e.eventState)if(e.velocity>=this.velocity&&e.distance>this.distance)return f},emit:function(e){if(this._state===f){var t=a(e);t.type="swipe",t.swipeDirection=h[e.direction],this.trigger(t);var n=a(e);n.type="swipe"+h[e.direction],n.swipeDirection=h[e.direction],this.trigger(n)}}}),t.register(i,"tap"),t.register(r,"doubletap"),t.register(o,"swipe"),t.conflict(r,i),t}),define("utils/gesture/data-processor",[],function(){"use strict";var e=Math.round,t=Math.max,n=Math.abs,i={startCenter:null,lastCenter:null,startTime:null,process:function(e,i,r){var o={},s=Date.now(),a=e.touches.length?e.touches:e.changedTouches;if("touchstart"===e.type)this.startCenter=this.getCenter(a),this.startTime=s,this.startData=o,this.preData=null;var u=this.startCenter,l=this.getCenter(a),c=o.deltaTime=s-this.startTime;o.pointers=a,o.x=l.x,o.y=l.y;var f=o.deltaX=l.x-u.x,p=o.deltaY=l.y-u.y;if(o.velocityX=f/c||0,o.velocityY=p/c||0,o.velocity=t(n(o.velocityX),n(o.velocityY)),o.angle=this.getAngle(u,l),o.distance=this.getDistance(u,l),o.direction=this.getDirection(f,p),o.eventState=e.type.replace("touch",""),o.timeStamp=s,this.preData){var d=o.instantDeltaTime=s-this.preData.timeStamp,h=o.instantVelocityX=(o.x-this.preData.x)/d||0,m=o.instantVelocityY=(o.y-this.preData.y)/d||0;if("move"===o.eventState&&(i||r)){var v=n(h)>n(m);if(i&&v||r&&!v)e.preventDefault()}}else o.instantDeltaTime=o.instantVelocityX=o.instantVelocityY=0;return this.preData=o,o.event=e,Object.freeze(o)},getCenter:function(t){return{x:e(t[0].clientX),y:e(t[0].clientY)}},getAngle:function(e,t){return 180*Math.atan2(t.y-e.y,t.x-e.x)/Math.PI},getDistance:function(e,t){var n=t.x-e.x,i=t.y-e.y;return Math.sqrt(n*n+i*i)},getDirection:function(e,t){if(e===t)return 0;if(n(e)>=n(t))return e>0?2:4;else return t<0?1:3}};return i}),define("utils/customStorage",["require","./fn"],function(e){"use strict";function t(e){if(e)e.u=(new Date).getTime()}function n(e){try{e=JSON.parse(e)}catch(t){e=JSON.stringify(e),e=JSON.parse(e)}return e}function i(e,t){var n;switch(e){case h.siteExceed:n="storage space need less than 4k";case h.lsExceed:n="Uncaught DOMException: Failed to execute setItem on Storage: Setting the value of "+t+" exceeded the quota at "+window.location.href}return n}function r(e,t){return{errCode:e,errMess:t}}function o(){var e=a()?localStorage.getItem(x):m[x];return e=e?n(e):{},t(e),e}function s(e){if(!e)e=x;a()?localStorage.removeItem(e):p.del(m,e)}function a(){var e=!1;if(window.localStorage&&window.localStorage.setItem)try{window.localStorage.setItem("lsExisted","1"),window.localStorage.removeItem("lsExisted"),e=!0}catch(t){e=!1}return e}function u(e){switch(e){case d.ASYNCSTORAGE:this.storage=new c;break;case d.LOCALSTORAGE:this.storage=new l;break;case d.COOKIESTORAGE:this.storage=new f}return this.storage}function l(){}function c(){}function f(){}var p=e("./fn"),d={LOCALSTORAGE:0,ASYNCSTORAGE:1,COOKIESTORAGE:2},h={siteExceed:21,lsExceed:22},m={},v=window.location.href,y=/mipcache.bdstatic.com/.test(v)||/c.mipcdn.com/.test(v),g=/[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+\.?/g,b=v.match(g),x=b&&b.length>1?b[1]:"",w=4096;return l.prototype.set=function(e,t,n,s){if(e&&t)if(s="function"==typeof n?n:s,y){var a=o();if(a[e]=t,n=parseInt(n,10),!isNaN(n)&&n>0)a.e=(new Date).getTime()+1e3*n;else p.del(a,"e");if(a=JSON.stringify(a),a.length>w)throw s&&s(r(h.siteExceed,i(h.siteExceed))),i(h.siteExceed);this._setLocalStorage(x,a,n,s)}else this._setLocalStorage(e,t,n,s)},l.prototype._setLocalStorage=function(e,t,n,o){var s=i(h.lsExceed,e);if(o="function"==typeof n?n:o,a())try{localStorage.setItem(e,t)}catch(i){if(this._isExceed(i)&&y)this._exceedHandler(e,t,n);else if(this._isExceed(i)&&!y)throw o&&o(r(h.lsExceed,s)),s}else{var u=t.length/1024/1024;for(var l in m)if(m[l])u+=m[l].length/1024/1024;if(u>5)throw o&&o(h.lsExceed,s),s;m[e]=t}},l.prototype.get=function(e){if(p.isString(e)){var t;if(y){var n=o();if(n&&n[e])t=n[e]}else t=a()?localStorage.getItem(e):m[e];return t}},l.prototype.rm=function(e){if(p.isString(e))if(y){var t=o();if(t&&t[e])p.del(t,e),this._setLocalStorage(x,JSON.stringify(t))}else a()?localStorage.removeItem(e):p.del(m,e)},l.prototype.clear=function(){if(y)s();else a()?localStorage.clear():m={}},l.prototype.rmExpires=function(){var e=!1;if(y){var t=a()?localStorage:m;for(var i in t)if(t[i]){var r;if("string"==typeof t[i])r=n(t[i]);if(r&&r.e){var o=parseInt(n(t[i]).e,10);if(o&&(new Date).getTime()>=o)e=!0,s(i)}}}return e},l.prototype._isExceed=function(e){var t=!1;if(e)if(e.code)switch(e.code){case 22:t=!0;break;case 1014:if("NS_ERROR_DOM_QUOTA_REACHED"===e.name)t=!0}else if(e.number===-2147024882)t=!0;return t},l.prototype._exceedHandler=function(e,t,i){var r,o;if(!this.rmExpires()){var a=localStorage;for(var u in a)if(a[u]){var l=n(a[u]).u;if(!o||parseInt(l,10)<r)o=u,r=l?parseInt(l,10):0}s(o)}this.set(e,t,i)},c.prototype.request=function(e){if(e&&e.url){var t={};if(t.mode=e.mode?e.mode:null,t.method=e.method?e.method:"GET",t.credentials=e.credentials?e.credentials:"omit",t.cache=e.cache?e.cache:"default",e.headers)t.headers=e.headers;if(e.body)t.body=e.body;fetch(e.url,t).then(function(t){if(t.ok)t.text().then(function(t){e.success&&e.success(JSON.parse(t))});else e.error&&e.error(t)}).catch(function(t){e.error&&e.error(t)})}},f.prototype.delExceedCookie=function(){var e=document.cookie,t=e.length,n=3072,i=5120;if(t>=i)for(var r=e.split(";"),o=0;o<r.length;o++){var s=r[o].split("=");if(s&&s.length>1){t-=r[o].length;var a=new Date;a.setTime(a.getTime()-1e3),document.cookie=s[0]+"="+s[1]+";expires="+a.toGMTString()}if(t<=n)break}},u}),define("utils/event-action",["require","./fn","../dom/dom"],function(e){"use strict";function t(e){e&&n.extend(this,n.pick(e,s))}var n=e("./fn"),i=e("../dom/dom"),r=/^(\w+):([\w-]+)\.([\w-]+)(?:\(([^\)]+)\))?$/,o=/^mip-/,s=["executeEventAction","parse","checkTarget","getTarget","attr"];return t.prototype={attr:"on",execute:function(e,t,n){if(t){var r,o="["+this.attr+"]";do{if(r=t.getAttribute(this.attr))if(this._execute(this.parse(r,e,n)),t=t.parentElement,!t)return;t=i.closest(t,o)}while(t)}},checkTarget:function(e){return e&&e.tagName&&o.test(e.tagName.toLowerCase())},getTarget:function(e){return document.getElementById(e)},executeEventAction:function(e,t){t.executeEventAction&&t.executeEventAction(e)},_execute:function(e){for(var t=0;t<e.length;t++){var n=e[t],i=this.getTarget(n.id);if(this.checkTarget(i))this.executeEventAction(n,i)}},parse:function(e,t,n){if("string"!=typeof e)return[];for(var i=e.trim().split(" "),o=[],s=0;s<i.length;s++){var a=i[s].match(r);if(a&&a[1]===t)o.push({type:a[1],id:a[2],handler:a[3],arg:a[4],event:n})}return o}},t}),define("dom/css-loader",[],function(){function e(e,n,i,r,o){var s=e.createElement("style");s.textContent=i;var a=null;if(o)s.setAttribute("mip-main","");else s.setAttribute("mip-extension",r||""),a=n.querySelector("style[mip-main]");return t(n,s,a),s}function t(e,t,n){if(n)if(n.nextSibling)e.insertBefore(t,n.nextSibling);else e.appendChild(t);else e.insertBefore(t,e.firstChild)}return{insertStyleElement:e}}),define("layout",[],function(){"use strict";function e(){}var t={NODISPLAY:"nodisplay",FIXED:"fixed",FIXED_HEIGHT:"fixed-height",RESPONSIVE:"responsive",CONTAINER:"container",FILL:"fill",FLEX_ITEM:"flex-item"},n={"mip-pix":{width:"1px",height:"1px"},"mip-stats":{width:"1px",height:"1px"},"mip-audio":null},i={"mip-anim":!0,"mip-brightcove":!0,"mip-embed":!0,"mip-iframe":!0,"mip-img":!0,"mip-list":!0,"mip-video":!0};return e.prototype.parseLayout=function(e){for(var n in t)if(t[n]==e)return e},e.prototype.getLayoutClass=function(e){return"mip-layout-"+e},e.prototype.isLayoutSizeDefined=function(e){return e==t.FIXED||e==t.FIXED_HEIGHT||e==t.RESPONSIVE||e==t.FILL||e==t.FLEX_ITEM},e.prototype.parseLength=function(e){if("number"==typeof e)return e+"px";if(e)if(/^\d+(\.\d+)?(px|em|rem|vh|vw|vmin|vmax|cm|mm|q|in|pc|pt)?$/.test(e))if(/^\d+(\.\d+)?$/.test(e))return e+"px";else return e},e.prototype.getLengthNumeral=function(e){return parseFloat(e)},e.prototype.hasNaturalDimensions=function(e){return e=e.toLowerCase(),void 0!==n[e]},e.prototype.getNaturalDimensions=function(e){var t=e.tagName.toLowerCase();if(!n[t]){var i=e.ownerDocument,r=t.replace(/^mip\-/,""),o=i.createElement(r);o.controls=!0,o.style.position="absolute",o.style.visibility="hidden",i.body.appendChild(o),n[t]={width:(o.offsetWidth||1)+"px",height:(o.offsetHeight||1)+"px"},i.body.removeChild(o)}return n[t]},e.prototype.isLoadingAllowed=function(e){return i[e.toLowerCase()]||!1},e.prototype.applyLayout=function(e){if(!e._layoutInited){e._layoutInited=!0;var n,i,r,o=e.getAttribute("layout"),s=e.getAttribute("width"),a=e.getAttribute("height"),u=e.getAttribute("sizes"),l=e.getAttribute("heights"),c=o?this.parseLayout(o):null,f=s&&"auto"!=s?this.parseLength(s):s,p=a?this.parseLength(a):null;if((!c||c==t.FIXED||c==t.FIXED_HEIGHT)&&(!f||!p)&&this.hasNaturalDimensions(e.tagName)){var d=this.getNaturalDimensions(e);n=f||c==t.FIXED_HEIGHT?f:d.width,i=p||d.height}else n=f,i=p;if(c)r=c;else if(!n&&!i)r=t.CONTAINER;else if(i&&(!n||"auto"==n))r=t.FIXED_HEIGHT;else if(i&&n&&(u||l))r=t.RESPONSIVE;else r=t.FIXED;if(e.classList.add(this.getLayoutClass(r)),this.isLayoutSizeDefined(r))e.classList.add("mip-layout-size-defined");if(r==t.NODISPLAY)e.style.display="none";else if(r==t.FIXED)e.style.width=n,e.style.height=i;else if(r==t.FIXED_HEIGHT)e.style.height=i;else if(r==t.RESPONSIVE){var h=e.ownerDocument.createElement("mip-i-space");h.style.display="block",h.style.paddingTop=this.getLengthNumeral(i)/this.getLengthNumeral(n)*100+"%",e.insertBefore(h,e.firstChild),e._spaceElement=h}else if(r==t.FILL);else if(r==t.CONTAINER);else if(r==t.FLEX_ITEM){if(n)e.style.width=n;if(i)e.style.height=i}if(e.classList.contains("mip-hidden"))e.classList.remove("mip-hidden");return r}},new e}),define("fixed-element",["require","util","layout"],function(e){"use strict";function t(){this._fixedLayer=null,this._count=0,this._fixedTypes={top:1,bottom:1,gototop:1,other:1},this._isAndroidUc=r.isUc()&&!r.isIos(),this._fixedElements=[]}var n=e("util"),i=e("layout"),r=n.platform,o=n.css;return t.prototype.init=function(){var e=document.querySelectorAll("mip-fixed");this.setFixedElement(e);var t=this._fixedElements.length,n=window.parent!==window;if(r.isIos()&&n)for(var i=(this.getFixedLayer(),0);i<t;i++)this.moveToFixedLayer(this._fixedElements[i],i);if(n)this.doCustomElements()},t.prototype.setFixedElement=function(e){for(var t={},n=0;n<e.length;n++){var i=e[n];if(o(i,{"z-index":1e4-n}),this._isAndroidUc)o(i,{position:"absolute"});var r=i.getAttribute("type"),s="right"==r||"left"==r?"other":r;if("gototop"!==s||"mip-gototop"===i.firstElementChild.tagName.toLowerCase())if(this._fixedTypes[s]&&this._fixedTypes[s]<2){if(this._fixedTypes[s]+=1,this.setFixedElementRule(i,r),this._fixedTypes[s]<2){this._count--;continue}var a="Fixed"+this._count++;t={id:a,element:e[n]},t.element.setAttribute("mipdata-fixedIdx",a),this._fixedElements.push(t)}else i.parentElement.removeChild(i);else;}},t.prototype.getFixedLayer=function(){if(this._fixedLayer)return this._fixedLayer;this._fixedLayer=document.createElement("body"),this._fixedLayer.className="mip-fixedlayer";var e=this._isAndroidUc?"100%":0,t=this._isAndroidUc?"100%":0;o(this._fixedLayer,{position:"absolute",top:0,left:0,height:e,width:t,"pointer-events":"none",overflow:"hidden",animation:"none","-webkit-animation":"none",border:"none","box-sizing":"border-box","box-shadow":"none",display:"block",float:"none",margin:0,opacity:1,outline:"none",transform:"none",transition:"none",visibility:"visible",background:"none"});var n=document.getElementsByTagName("html")[0];return n.appendChild(this._fixedLayer),this._fixedLayer},t.prototype.moveToFixedLayer=function(e,t){var n=e.element;if(n.parentElement!=this._fixedLayer){if(!e.placeholder)o(n,{"pointer-events":"initial"}),e.placeholder=document.createElement("mip-i-ph"),e.placeholder.setAttribute("mipdata-fixedIdx",e.id),e.placeholder.style.display="none";n.parentElement.replaceChild(e.placeholder,n),this.getFixedLayer().appendChild(n)}},t.prototype.doCustomElements=function(){var e=document.styleSheets;if(e)for(var t=0;t<e.length;t++){var n=e[t];if(!n.disabled&&n.ownerNode&&"STYLE"==n.ownerNode.tagName&&!n.ownerNode.hasAttribute("mip-extension"))this._findFixedSelectors(n.cssRules);else;}},t.prototype._findFixedSelectors=function(e){for(var t=0;t<e.length;t++){var n=e[t],i=n.type;if(1==i){if("*"!=n.selectorText&&"fixed"==n.style.position)try{for(var r=n.selectorText,o=document.querySelectorAll(r),s=0;s<o.length;s++)o[s].parentElement.removeChild(o[s])}catch(e){console.warn("Cannot find the selector of custom fixed elements")}}else if(4==i)this._findFixedSelectors(n.cssRules);else if(12==i)this._findFixedSelectors(n.cssRules)}},t.prototype.setFixedElementRule=function(e,t){switch(t){case"top":case"bottom":e.style.maxHeight="90px";break;case"right":case"left":this.setStyle(e),e.style.maxHeight="25%",e.style.maxWidth="10%";break;case"gototop":e.style.bottom="90px",e.style.right="10%";break;default:e.style.display="none"}},t.prototype.setStyle=function(e){var t=i.parseLength(e.getAttribute("bottom"));if(t)return void(e.style.bottom=t);var n=i.parseLength(e.getAttribute("top"));if(n)return void(e.style.top=n);if(!n&&!t)e.parentElement.removeChild(e),this._fixedTypes.other-=1},t.prototype.showFixedLayer=function(e){if(e)o(e,{display:"block"})},t.prototype.hideFixedLayer=function(e){if(e)o(e,{display:"none"})},new t}),define("viewport",["require","./util","./utils/event-emitter","./fixed-element"],function(e){"use strict";function t(){return c.init(),o=r.bind(this),(u.platform.needSpecialScroll?document.body:d).addEventListener("scroll",n.bind(this),!1),d.addEventListener("resize",i.bind(this),!1),this}function n(e){var t=this.getScrollTop(),n=Date.now();if(!m||n-s>=20)m=!0,o(),s=n,a=t,v=e;this.trigger("scroll",e)}function i(e){this.trigger("resize",e)}function r(){var e=Date.now(),t=e-s||0;if(clearTimeout(y),t&&Math.abs((a-this.getScrollTop())/t)<.03)m=!1,this.trigger("changed",v,this.getRect());else y=setTimeout(o,t>=20?20:20-t)}var o,s,a,u=e("./util"),l=e("./utils/event-emitter"),c=e("./fixed-element"),f=u.rect,p=document.documentElement,d=window,h={getScrollTop:function(){return f.getScrollTop()},getScrollLeft:function(){return f.getScrollLeft()},setScrollTop:function(e){f.setScrollTop(e)},getWidth:function(){return d.innerWidth||p.clientWidth},getHeight:function(){return d.innerHeight||p.clientHeight},getScrollWidth:function(){return f.getScrollWidth()},getScrollHeight:function(){return f.getScrollHeight()},getRect:function(){return f.get(this.getScrollLeft(),this.getScrollTop(),this.getWidth(),this.getHeight())}},m=!1,v=null,y=null;return l.mixin(h),t.call(h)}),define("customElement",["require","./utils/event-emitter"],function(e){"use strict";function t(e){if(this.element=e,this.init)this.init()}var n=e("./utils/event-emitter");return t.prototype.applyFillContent=function(e,t){if(e.classList.add("mip-fill-content"),t)e.classList.add("mip-replaced-content")},t.prototype.createdCallback=function(){},t.prototype.attachedCallback=function(){},t.prototype.detachedCallback=function(){},t.prototype.attributeChangedCallback=function(){},t.prototype.firstInviewCallback=function(){},t.prototype.viewportCallback=function(){},t.prototype.prerenderAllowed=function(){return!1},t.prototype.hasResources=function(){return!1},t.prototype.build=function(){},t.prototype.expendAttr=function(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(this.element.hasAttribute(i)){var r=this.element.getAttribute(i);t.setAttribute?t.setAttribute(i,r):t[i]=r}}return t},t.prototype.addEventAction=function(){var e=this._actionEvent;if(!e)e=this._actionEvent=new n,e.setEventContext(this);e.on.apply(e,arguments)},t.prototype.executeEventAction=function(e){var t=this._actionEvent;if(e&&t)t.trigger(e.handler,e.event,e.arg)},t.prototype.resourcesComplete=function(){this.element.resourcesComplete()},{create:function(){function e(e){t.call(this,e)}return e.prototype=Object.create(t.prototype),e}}}),define("element",["require","./dom/css-loader","./layout","./performance","./resources"],function(e){"use strict";function t(){if(s)return s;var e=Object.create(HTMLElement.prototype);return e.createdCallback=function(){var e=c[this.name];this.classList.add("mip-element"),this._inViewport=!1,this._firstInViewport=!1,this._resources=o;var t=this.customElement=new e(this);if(t.createdCallback(),t.hasResources())l.addFsElement(this)},e.attachedCallback=function(){this._layout=u.applyLayout(this),this.customElement.attachedCallback(),this._resources.add(this)},e.detachedCallback=function(){this.customElement.detachedCallback(),this._resources.remove(this),l.fsElementLoaded(this)},e.attributeChangedCallback=function(){this.customElement.attributeChangedCallback()},e.inViewport=function(){return this._inViewport},e.viewportCallback=function(e){if(this._inViewport=e,!this._firstInViewport)this._firstInViewport=!0,this.customElement.firstInviewCallback();this.customElement.viewportCallback(e)},e.isBuilt=function(){return this._built},e.prerenderAllowed=function(){return this.customElement.prerenderAllowed()},e.build=function(){if(!this.isBuilt())try{this.customElement.build(),this._built=!0}catch(e){console.warn("build error:",e)}},e.executeEventAction=function(e){this.customElement.executeEventAction(e)},e.resourcesComplete=function(){l.fsElementLoaded(this)},s=e}function n(e){var n=Object.create(t());return n.name=e,n}function i(e,t){if(e)a.insertStyleElement(document,document.head,e,t,!1)}function r(t,r,s){if(!c[t]){if(!o){var a=e("./resources");o=new a}c[t]=r,i(s,t),document.registerElement(t,{prototype:n(t)})}}var o,s,a=e("./dom/css-loader"),u=e("./layout"),l=e("./performance"),c={};return r}),define("performance",["require","./util","./viewer"],function(e){"use strict";function t(e){if(!d)p.push(e)}function n(e){var t=p.indexOf(e);if(t!=-1)p.splice(t,1)}function i(){var e,t=window.performance;if(t&&t.timing)e=t.timing.toJSON?t.timing.toJSON():l.fn.extend({},t.timing);else e={};return l.fn.extend(e,m)}function r(e,t){m[e]=parseInt(t,10)||Date.now(),v.trigger("update",i())}function o(){if(!m.MIPFirstScreen)if(0===p.length)r("MIPFirstScreen")}function s(){r("MIPDomContentLoaded"),setTimeout(function(){p=p.filter(function(e){return e.inViewport()}),d=!0,o()},10)}function a(e){n(e),o()}function u(e){if(!h)if(h=!0,r("MIPStart",e),f.on("show",function(e){r("MIPPageShow",e)}),"complete"===document.readyState)s();else document.addEventListener("DOMContentLoaded",s,!1)}var l=e("./util"),c=l.EventEmitter,f=e("./viewer"),p=[],d=!1,h=!1,m={},v=new c;return{start:u,addFsElement:t,fsElementLoaded:a,getTiming:i,on:function(){v.on.apply(v,arguments)}}}),define("viewer",["require","./util","./utils/event-action","./utils/event-emitter"],function(e){"use strict";var t=e("./util"),n=t.Gesture,i=t.css,r=t.platform,o=e("./utils/event-action"),s=e("./utils/event-emitter"),a=window,u={init:function(){if(this._gesture=new n(document,{preventX:!1}),this.setupEventAction(),this.isIframed)this.patchForIframe(),this._proxyLink(),this.sendMessage("mippageload",{time:Date.now(),title:encodeURIComponent(document.title)})},isIframed:a!==top,patchForIframe:function(){if(r.needSpecialScroll)i([document.documentElement,document.body],{height:"100%","overflow-y":"auto","-webkit-overflow-scrolling":"touch"}),i(document.body,"position","relative");var e=r.getOsVersion();e=e?e.split(".")[0]:"";var t="8"==e&&r.isUc()&&320===screen.width||"9"==e&&r.isSafari();if(t)window.addEventListener("pageshow",function(e){if(e.persisted)document.body.style.display="none",location.reload()})},show:function(){i(document.body,{opacity:1,animation:"none"}),this.isShow=!0,this._showTiming=Date.now(),this.trigger("show",this._showTiming)},sendMessage:function(e,t){if(this.isIframed)window.parent.postMessage({event:e,data:t},"*")},setupEventAction:function(){var e=this.eventAction=new o;this._gesture.on("tap",function(t){e.execute("tap",t.target,t)})},_bindEventCallback:function(e,t){if("show"===e&&this.isShow&&"function"==typeof t)t.call(this,this._showTiming);
},_proxyLink:function(){var e=this,n=/^http/;t.event.delegate(document.body,"a","click",function(t){if(this.href){if(!n.test(this.href))return void this.setAttribute("target","_top");t.preventDefault(),e.sendMessage("mibm-jumplink",{url:this.href})}},!1)}};return s.mixin(u),u}),define("resources",["require","./utils/fn","./viewport","./dom/rect","./utils/gesture"],function(e){"use strict";function t(){this._rid=a++,this._eid=0,s[this._rid]={};var e=this._update.bind(this);this.updateState=n.throttle(e),this._viewport=i,this._gesture=new o(document.body,{preventX:!1}),this._bindEvent()}var n=e("./utils/fn"),i=e("./viewport"),r=e("./dom/rect"),o=e("./utils/gesture"),s={},a=0;return t.prototype={_bindEvent:function(){var e,t=this;this._viewport.on("changed resize",this.updateState),this._gesture.on("swipe",function(n,i){var r=Math.round(600*i.velocity);r<100&&(r=100),r>600&&(r=600),clearTimeout(e),e=setTimeout(t.updateState,r)}),this.updateState()},add:function(e){e._eid=this._eid++,s[this._rid][e._eid]=e,e.build(),this.updateState()},remove:function(e){var t=e._eid||e;if(Number.isFinite(+t)&&s[this._rid][t])return delete s[this._rid][t],!0;else return!1},getResources:function(){return s[this._rid]},getResourcesList:function(){return n.values(this.getResources())},setInViewport:function(e,t){if(e.inViewport()!==t)e.viewportCallback(t)},_update:function(){var e=this.getResources(),t=this._viewport.getRect();for(var n in e){var i=e[n].prerenderAllowed()||r.overlapping(r.getElementRect(e[n]),t);this.setInViewport(e[n],i)}}},t.prerenderElement=function(e){if(e.inViewport&&!e.inViewport())e.viewportCallback&&e.viewportCallback(!0)},t}),define("templates",[],function(){"use strict";function e(){}function t(){this._templates={},this._solverList={}}var n="_mip_template_cached";return e.prototype={cache:function(){},render:function(){}},t.prototype={constructor:t,Template:e,_create:function(e){if(!this._templates[e]){var t;this._templates[e]=new Promise(function(e){t=e});this._solverList[e]=t}return this._templates[e]},_getTemplate:function(e){return this._create(e)},register:function(e,t){this._create(e);var n=this._solverList[e];n(new t)},isTemplateClass:function(t){if(!t||!t.prototype)return!1;else return e.prototype.isPrototypeOf(t.prototype)},render:function(e,t){var i=this.find(e);if(i){var r=i.getAttribute("type"),o=i.innerHTML;return this._getTemplate(r).then(function(e){if(!i[n])i[n]=!0,e.cache(o);if(Array.isArray(t))if(0===t.length)return Promise.resolve([]);else return t.map(function(t){return e.render(o,t)});return e.render(o,t)})}},find:function(e){if(!e||1!==e.nodeType)return console.error("Template parent element must be a node element"),null;var t,n=e.getAttribute("template");if(n)t=document.getElementById(n);else t=e.querySelector("template");if(!t)return console.error("Can not find template element"),null;else return t},inheritTemplate:function(){function t(){e.apply(this,arguments)}return t.prototype=Object.create(e.prototype),t.constructor=t,t}},new t}),define("components/mip-img",["require","util","customElement","naboo","viewport"],function(e){"use strict";function t(e,t){var n=f.getWidth(),i=Math.round(n*t/e),r=(f.getHeight()-i)/2;return{width:n,height:i,left:0,top:r}}function n(e,t){var n=document.querySelector(".mip-img-popUp-wrapper");if(n&&"mip-img-popUp-name"===n.getAttribute("data-name")&&"body"===n.parentNode.tagName.toLowerCase())return n.querySelector("img").setAttribute("src",t.src),n;var i=document.createElement("div");new a(i,{preventY:!0}),i.className="mip-img-popUp-wrapper",i.setAttribute("data-name","mip-img-popUp-name");var r=document.createElement("div"),o=new Image;return r.className="mip-img-popUp-bg",o.className="mip-img-popUp-innerimg",o.src=t.src,i.appendChild(r),i.appendChild(o),document.body.appendChild(i),i}function i(e,i){var r,o,s;i.addEventListener("click",function(a){function l(){c.animate(o,{opacity:0}).start(),c.animate(s,p(i)).start(function(){u(i,"visibility","visible"),u(r,"display","none")}),r.removeEventListener("click",l,!1)}if(a.stopPropagation(),i.width+i.naturalWidth!==0){var f=function(){d=p(i),u(s,d),c.animate(s,t(d.width,d.height)).start()};window.addEventListener("resize",f),r=n(e,i),o=r.querySelector(".mip-img-popUp-bg"),s=r.querySelector("img"),r.addEventListener("click",l,!1);var d=p(i);u(s,d),u(o,"opacity",1),u(r,"display","block"),c.animate(s,t(d.width,d.height)).start(),u(i,"visibility","hidden"),u(i.parentNode,"zIndex","inherit")}},!1)}function r(){var e=new Image;this.applyFillContent(e,!0);var t=this.element,n=o.makeCacheUrl(t.getAttribute("src"),"img");if(e.src=n,t.getAttribute("alt"))e.setAttribute("alt",t.getAttribute("alt"));if(t.appendChild(e),t.hasAttribute("popup"))i(t,e);d(t,e)}var o=e("util"),s=e("customElement").create(),a=o.Gesture,u=o.css,l=o.rect,c=e("naboo"),f=e("viewport"),p=function(e){var t=l.getElementOffset(e);return t},d=function(e,t){t.addEventListener("load",function(){e.classList.add("mip-img-loaded"),e.customElement.resourcesComplete()})};return s.prototype.firstInviewCallback=r,s.prototype.hasResources=function(){return!0},s}),define("components/mip-pix",["require","customElement","util"],function(e){function t(e,t,n){if(e.indexOf("?"+t)>-1||e.indexOf("&"+t)>-1){var i=new RegExp(t+"=({\\w+})"),r=i.exec(e)?i.exec(e)[1]:"";return e.replace(r,n)}return e+=e.indexOf("?")>-1?"&":"?",e+t+"="+n}var n=e("customElement").create(),i=e("util");return n.prototype.build=function(){var e=new Image,n=this.element,r=n.getAttribute("src"),o=window.location.href,s=(document.querySelector("title")||{}).innerHTML||"",a=Date.now();r=t(r,"t",a),r=t(r,"title",encodeURIComponent(s)),r=t(r,"host",encodeURIComponent(o)),e.src=r,e.setAttribute("width",0),e.setAttribute("height",0),n.setAttribute("width",""),n.setAttribute("height",""),n.appendChild(e),i.css(n,{display:"none"})},n}),define("components/mip-carousel",["require","customElement"],function(e){var t=e("customElement").create();return t.prototype.build=function(){function e(e){var t=e.children,n=Array.prototype.slice.call(t),i=[];n.map(function(t,n){if("mip-i-space"!==t.tagName.toLowerCase()){if(e.hasAttribute("autoplay"))if(t.hasAttribute("popup"))t.removeAttribute("popup");i.push(t),e.removeChild(t)}});var r=i[0].cloneNode(!0),o=i[i.length-1].cloneNode(!0);return i.unshift(o),i.push(r),i}function t(e){if(0!==S.length){_=S.length;var t=document.createElement("div");t.className="mip-carousel-container";var n=document.createElement("div");n.className="mip-carousel-wrapper",e.map(function(e,t){var i=document.createElement("div");i.className="mip-carousel-slideBox",i.appendChild(e),i.style.width=100/_+"%",n.appendChild(i)}),n.style.width=100*_+"%",t.appendChild(n),d.appendChild(t);var i=-m;n.style.webkitTransform="translate3d("+i+"px, 0, 0)",e.map(function(e,t){h.applyFillContent(e,!0),MIP.prerenderElement(e);for(var n=e.querySelectorAll("mip-img"),i=0;i<n.length;i++)h.applyFillContent(n[i],!0),MIP.prerenderElement(n[i])})}}function n(){var e=0,t=d.querySelector(".mip-carousel-wrapper");t.addEventListener("touchstart",function(e){var t=e.targetTouches[0];N={x:t.pageX,y:t.pageY,time:+new Date},k=0,T=t.pageX,clearInterval(p)},!1),t.addEventListener("touchmove",function(t){var n=t.targetTouches[0];if(L={x:n.pageX-N.x,y:n.pageY-N.y},k=Math.abs(L.x)<Math.abs(L.y)?1:0,0===k)t.preventDefault();e=t.targetTouches[0].pageX-T+C,f(e,"0ms"),w.stop=0},!1),t.addEventListener("touchend",function(t){if("img"!==t.target.tagName.toLocaleLowerCase())t.preventDefault();var n=0;if(!w.stop){if(e>C)n=r(e);else n=i(e);c(n),w.stop=1}if(v)o()},!1)}function i(e){var t=m,n=-(A*t+.2*t),i=0;if(n>e)i=-t*(A+1),A+=1;else i=-t*A;return i}function r(e){var t=m,n=-((A-1)*t+.8*t),i=0;if(n>e)i=-t*A;else i=-t*(A-1),A-=1;return i}function o(){p=setInterval(function(){var e=m,t=-e*(A+1);A+=1,c(t)},g)}function s(){var e=document.createElement("div"),t=document.createElement("p"),n=document.createElement("span"),i=document.createElement("span");e.className="mip-carousel-indicatorbox",t.className="mip-carousel-indicatorBoxwrap",n.className="mip-carousel-indicatornow",i.innerHTML="/"+(_-2),n.innerHTML=A,t.appendChild(n),t.appendChild(i),e.appendChild(t),d.appendChild(e)}function a(){if(b){var e=A;if(e<=0)e=_-2;else if(e>_-2)e=1;var t=d.querySelector(".mip-carousel-indicatornow");t.innerHTML=e}}function u(){var e=document.createElement("p");e.className="mip-carousel-preBtn";var t=document.createElement("p");t.className="mip-carousel-nextBtn",d.appendChild(e),d.appendChild(t),l()}function l(){d.querySelector(".mip-carousel-preBtn").addEventListener("touchend",function(e){var t=m;if(E.stop){E.stop=0;var n=-t*(A-1);if(A-=1,clearInterval(p),c(n),v)o()}},!1),d.querySelector(".mip-carousel-nextBtn").addEventListener("touchend",function(e){var t=m;if(E.stop){E.stop=0;var n=-t*(A+1);if(A+=1,clearInterval(p),c(n),v)o()}},!1)}function c(e,t){var n=d.querySelector(".mip-carousel-wrapper");if(t)f(e,"0ms"),n.style.transitionDuration="0ms";else f(e,"300ms"),n.style.transitionDuration="300ms";if(A===_-1)C=-m,A=1,setTimeout(function(){f(C,"0ms"),E.stop=1},300);else if(0===A)C=-(_-2)*m,A=_-2,setTimeout(function(){f(C,"0ms"),E.stop=1},300);else C=e,E.stop=1;a()}function f(e,t){var n=d.querySelector(".mip-carousel-wrapper");n.style.webkitTransform="translate3d("+e+"px, 0px, 0px)",n.style.transitionDuration=t}var p,d=this.element,h=this,m=d.clientWidth,v=d.hasAttribute("autoplay"),y=d.getAttribute("defer"),g=y?y:4e3,b=d.hasAttribute("indicator"),x=d.hasAttribute("buttonController"),w={stop:1},E={stop:1},T=0,C=-m,A=1,_=0,S=e(d);t(S);var N={},L={},k=0;if(n(),v)o();if(b)s();if(x)u();window.addEventListener("resize",function(){m=d.clientWidth;var e=-m*A;c(e,"0ms")},!1)},t}),define("components/mip-iframe",["require","customElement","util"],function(e){var t=e("customElement").create(),n=e("util"),i=["allowfullscreen","allowtransparency","sandbox"];return t.prototype.build=function(){var e=this.element,t=e.getAttribute("src"),r=e.getAttribute("srcdoc");if(r)t="data:text/html;charset=utf-8;base64,"+window.btoa(r);var o=e.getAttribute("height"),s=e.getAttribute("width")||"100%";if(t&&o){var a=document.createElement("iframe");a.frameBorder="0",a.scrolling="no",n.css(a,{width:s,height:o}),this.applyFillContent(a),a.src=t,this.expendAttr(i,a),e.appendChild(a)}},t}),define("components/index",["require","../element","./mip-pix","./mip-img","./mip-carousel","./mip-iframe","./mip-video"],function(e){"use strict";function t(){var t=e("../element");t("mip-pix",e("./mip-pix")),t("mip-img",e("./mip-img")),t("mip-carousel",e("./mip-carousel")),t("mip-iframe",e("./mip-iframe")),t("mip-video",e("./mip-video"))}return{register:t}}),define("components/mip-video",["require","customElement","viewer"],function(e){function t(e){var t={};return Array.prototype.slice.apply(e).forEach(function(e){t[e.name]=e.value}),t}var n=e("customElement").create(),i=e("viewer"),r=["ads","src","controls","loop","autoplay","autoplay","autobuffer","crossorigin","height","muted","preload","poster","width"],o=window.parent!==window;return n.prototype.firstInviewCallback=function(){this.attributes=t(this.element.attributes);var e=!!window.location.protocol.match(/^https:/),n=!!this.attributes.src.match(/^https:/);if(n||o&&!n&&!e)this.videoElement=this.renderInView();else this.videoElement=this.renderPlayElsewhere();this.applyFillContent(this.videoElement,!0)},n.prototype.renderInView=function(){var e=document.createElement("video");for(var t in this.attributes)if(this.attributes.hasOwnProperty(t)&&r.indexOf(t)>-1)e.setAttribute(t,this.attributes[t]),e.setAttribute("playsinline","playsinline"),e.setAttribute("webkit-playsinline","webkit-playsinline");return Array.prototype.slice.apply(this.element.childNodes).forEach(function(t){if("mip-i-space"!==t.nodeName.toLowerCase())e.appendChild(t)}),this.element.appendChild(e),e},n.prototype.renderPlayElsewhere=function(){function e(){if(o)i.sendMessage("mip_video_jump",{poster:t.dataset.videoPoster,src:t.dataset.videoSrc})}var t=document.createElement("div");if(t.setAttribute("class","mip-video-poster"),this.attributes.poster)t.style.backgroundImage="url("+this.attributes.poster+")",t.style.backgroundSize="cover";else t.style.background="#333";var n=document.createElement("span");return n.setAttribute("class","mip-video-playbtn"),t.appendChild(n),t.dataset.videoSrc=this.attributes.src,t.dataset.videoPoster=this.attributes.poster,t.addEventListener("click",e,!1),this.element.appendChild(t),t},n}),require.config({paths:{"searchbox/openjs/aio":"//m.baidu.com/static/searchbox/openjs/aio.js?v=201606",jquery:"//mipcache.bdstatic.com/static/v1/deps/jquery"}}),require(["mip"]);