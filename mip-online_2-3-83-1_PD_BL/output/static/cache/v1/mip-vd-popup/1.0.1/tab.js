define("mip-vd-popup/tab",[],function(){function e(e,n,o,a,r){var s=0;if(e<n);else if(e>=a-n)s=o.parent().offset().width;else s=o.offset().left-o.parent().offset().left-o.width();if(!i)if(r)t(o.parent().parent().scrollLeft(),s,o.parent().parent());else o.parent().parent().scrollLeft(s)}function t(e,t,n){var o=(t-e)/8;i=setInterval(function(){var e=n.scrollLeft();if(o>0&&e>=t||0==o)o=0,clearInterval(i);else if(o<0&&e<=t)o=0,clearInterval(i);n.scrollLeft(e+o)},30),setTimeout(function(){clearInterval(i),n.scrollLeft(t),i=null},270)}var i,n=function(){},o=function(e){var t=this,i=$(t.panel);this.toggle=i.find("."+t.toggleClass),this.view=i.find("."+t.viewClass),this.wrapper=i.find("."+t.navWrapperClass),this.navs=this.wrapper.find("."+t.navClass),this.conts=i.find("."+t.contClass),this.sum=this.navs.length,this.tabScroll=void 0,c.call(this),this.allowScroll&&this.view.length&&r.call(this),this.toggleMore&&this.allowScroll&&this.view.length&&s.call(this)},a=function(e){var t=this;if(e.children().eq(0).wrap('<div class="mip-vd-tabs-scroll-touch"></div>'),e.children().eq(1).hasClass(t.toggleClass))e.find("."+t.navWrapperClass).append('<div class="mip-vd-tabs-nav-toggle-holder"></div>');return e},r=function(){var t=this;if(t.tabScroll=a.call(t,t.view),t.current>0&&t.current<t.sum){var i=Math.min(t.current+1,t.sum-1);if(t.navs.eq(i).length&&t.navs.eq(i).position().left>t.view.width()-29)e(i,1,t.navs.eq(t.current),t.navs.length,!1)}if("function"==typeof t.onTabScrollEnd)t.tabScroll.on("scrollEnd",function(){if(!this.customFlag||!this.customFlag.autoScroll)t.onTabScrollEnd.call(t,this)})},s=function(){function e(){o.empty(),n.hide(),i.toggle.css({"-webkit-transform":"scaleY(1)",transform:"scaleY(1)"}),i.toggleState=0}function t(){o.html(i.navs.clone()),n.append(o),i.view.after(n.show()),i.toggle.css({"-webkit-transform":"scaleY(1)",transform:"scaleY(-1)"}),i.toggleState=1}var i=this,n=$('<div class="'+i.layerClass+'"><p>'+i.toggleLabel+"</p></div>"),o=$('<ul class="'+i.layerUlClass+'"></ul>');i.toggleState=0,o.on("click","."+i.navClass,function(){var t=$(this);i.navs.eq(t.attr("data-tid")).trigger("click"),e()}),i.toggle.on("click",function(){if(0==i.toggleState)t();else e()})},c=function(){var t=this;$.each(t.navs,function(i,o){var a=$(o);if(a.hasClass(t.currentClass))t.current=i;a.addClass(t.logClass),a.attr("data-tid",i),a.on("click",function(){var i=parseInt($(this).attr("data-tid"));if(i!==t.current){if(t.last=t.current,t.current=i,t.hideTab(t.last),t.showTab(t.current),t.onResetChange==n)t.hideContent(t.last),t.showContent(t.current),t.onChange.call(t,t.current,t.conts[t.current]);else t.onResetChange.call(t,t.current);if(t.tabScroll)e(t.current+1,1,a,t.navs.length,!0)}})}),$.each(t.conts,function(e,i){if(e==t.current)t.showTab(e),t.showContent(e);else t.hideTab(e),t.hideContent(e)})},p=function(e,t){t=t||{},this.panel=e,this.current=t.current||0,this.currentClass=t.currentClass||"c-tabs-nav-selected",this.navWrapperClass=t.navWrapperClass||"c-tabs-nav",this.navClass=t.navClass||"c-tabs-nav-li",this.contClass=t.contClass||"c-tabs-content",this.viewClass=t.viewClass||"c-tabs-nav-view",this.toggleClass=t.toggleClass||"c-tabs-nav-toggle",this.layerClass=t.layerClass||"c-tabs-nav-layer",this.layerUlClass=t.layerUlClass||"c-tabs-nav-layer-ul",this.allowScroll=t.allowScroll||!1,this.toggleMore=t.toggleMore||!1,this.toggleLabel=t.toggleLabel||"请选择",this.logClass=t.logClass||"WA_LOG_TAB",this.scrollSize=t.scrollSize||"-40",this.navs=[],this.seps=[],this.conts=[],this.sum=0,this.last=null,this.onChange=t.onChange||n,this.onResetChange=t.onResetChange||n,this.onTabScrollEnd=t.onTabScrollEnd,e&&o.call(this,t)};return $.extend(p.prototype,{showContent:function(e){var t=this.conts[e];if(t)$(this.conts[e]).show()},hideContent:function(e){var t=this.conts[e];if(t)$(t).hide()},showTab:function(e){var t=this,i=t.navs;t.seps;$(i[e]).addClass(t.currentClass)},hideTab:function(e){var t=this,i=t.navs;t.seps;$(i[e]).removeClass(t.currentClass)}}),p});