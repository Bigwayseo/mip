define("extensions/mip-recommend/0.1/util",["require"],function(){function e(e,t){return t=t||{},e.replace(/#\{([^\}]+)\}/g,function(){return void 0!==t[arguments[1]]?t[arguments[1]]:""})}function t(e){var t=1e3*e;if(new Date-t<6e4)return"刚刚";var o=Math.floor((new Date-t)/6e4);if(60>o)return o+"分钟前";var r=Math.floor(o/60);if(24>r)return r+"小时前";var i=new Date(t),n=i.getMonth()+1;n=10>n?"0"+n:n;var d=i.getDate()<10?"0"+i.getDate():i.getDate();return n+"-"+d}function o(e,t){var o=new RegExp(e+"=([^&?#]+)"),r=t,i=r.match(o);return i?i[1]:""}function r(e,t){return e=e+(e.indexOf("?")>-1?"&":"?")+$.param(t)}function i(e){return e?1e5>e?e:1e8>e?Math.round(e/1e4,10)+"万":(e/1e8).toFixed(1).replace(/\.0+$/,"")+"亿":0}return{timeSince:t,getParam:o,addParam:r,format:e,formatBigNumber:i}}),define("extensions/mip-recommend/0.1/recommend",["require","extensions/mip-recommend/0.1/util"],function(e){function t(e){var t=e.recommend?e.recommend:e;if(t&&t.length){var o=n?"":"MIP_LOG_BTN";$.each(t,function(e,t){$(".recommends").append("<div "+(t.head?'data-head="'+t.head+'"':"")+' class="'+o+" recommends-box"+(e?"":" recommends-box-first")+'" data-click=\'{"action":"recommend", "order":"'+e+'", "href":"'+t.url+'", "type": "sf"}\'><a class="recommends-href" href='+t.url+'><div class="recommends-title">'+t.title+'</div><div class="recommends-info"><span>'+d.timeSince(t.time)+'</span><span class="recommends-provider">'+t.provider+"</span></div></a></div>")})}else $(".recommends").append('<p class="recommends-empty">暂无相关资讯</p>');var r=e.recommend_more;if(r){var i=d.addParam(r.url,{from:"recmd"});$(".recommends").addClass("recommends-more").append('<div class="recommends-more-line"><a target="_blank" href="'+i+'" class="recommends-more-link">'+(r.text||"查看更多 <em>资讯</em> ")+"</a></div>")}}function o(e){$(".hotpoint").length||$(".recommends").after(a);var t=e.hot_card;if(t&&t.length){var o="",r=t.length,i='<div class="c-span6 hotpoint-item"><a target="#{target}" class="MIP_LOG_BTN c-bloaka c-color c-urljump c-line-clamp1#{hotClass}" href="#{href}" data-click=\'{"action":"hotpoint", "order":"#{index}", "href":"#{href}"}\' data-urljump=\'#{urljump}\'>#{text}</a></div>';if($.each(t,function(e,t){t.type?'<i class="c-text-box c-text-box-red">新</i>':"",e%2||(e&&(o+="</div>"),o+='<div class="c-row hotpoint-row">'),o+=d.format(i,{index:e,target:n?"_blank":"_self",hotClass:"",href:t.url,text:t.query,urljump:JSON.stringify({t:"mdd",lid:d.getParam("lid",location.href)})}),e===r-1&&(o+="</div>")}),$(".hotpoint").append('<div class="hotpoint-box">'+o+"</div>"),e.hot_card_more){var m=e.hot_card_more.link||"https://m.baidu.com/s?word=%E7%99%BE%E5%BA%A6%E7%83%AD%E7%82%B9&sa=oper_olympic",c=e.hot_card_more.text||"点击查看更多百度热点新闻",p='<div class="hotpoint-more"><a target="_blank" href="'+m+'" class="hotpoint-more-link">'+c+"</a></div>";$(".hotpoint").append(p)}}else $(".hotpoint").remove()}function r(){$(".recommends").delegate(".recommends-box","click",function(e){e.preventDefault();var t=$(this).find(".recommends-href").attr("href"),o=$(this).data("head");o||(o=$(this).find(".recommends-provider").text());var r={event:"loadiframe",data:{url:t,enc:"no",title:o,click:$(this).data("click")}};n?window.parent.postMessage(r,"*"):location.href=t})}function i(e){var t=e.act_card;if(t&&t.length){$(".recommends").after(m);var o='<a target="_blank" class="MIP_LOG_BTN recommend-act-item" href="#{url}"><img class="recommend-act-icon" src="#{icon}" /><span class="recommend-act-text">#{text}</span></a>',r="";$.each(t,function(e,t){var i=d.addParam(t.url,{from:"recmd"});r+=d.format(o,{url:i,text:t.text,icon:t.icon})}),$(".recommend-act").html(r)}}var n=window.parent!==window,d=e("extensions/mip-recommend/0.1/util"),a='<div class="hotpoint"><div class="hotpoint-header">新闻热点</div></div>',m='<div class="recommend-act"></div>';return{init:r,render:t,renderHot:o,renderAct:i}}),define("extensions/mip-recommend/0.1/mip-recommend",["require","customElement","extensions/mip-recommend/0.1/recommend"],function(e){function t(e){return $.ajax({url:e,dataType:"jsonp",jsonp:"cb",data:{url_key:location.href}})}function o(){if(!this.isRender){this.isRender=!0;var e=this.getAttribute("src"),o=this.getAttribute("server")||"olympic";e||(e=d[o]),i.init(),t(e).then(function(e){i.render(e.data),i.renderHot(e.data),i.renderAct(e.data)})}}var r=e("customElement"),i=e("extensions/mip-recommend/0.1/recommend");r.prototype.init=function(){this.build=o};var n=/^https/.test(location.protocol),d={olympic:(n?"https://sp0.baidu.com/5LMDcjW6BwF3otqbppnN2DJv/olympic.pae.baidu.com":"http://olympic.pae.baidu.com")+"/pae/olympic/api/reclist",headline:"//headline.baidu.com/doc/recommended"};return r}),require(["extensions/mip-recommend/0.1/mip-recommend"],function(e){MIP.css.mipRecommend=".recommends{width:100%;min-height:230px;padding:16px 0 14px;margin-top:13px;background-color:#fff;overflow:hidden;text-align:left}.recommends>div{margin:0 16px}.recommends-box a{display:block;overflow:hidden;text-decoration:none;color:#333}.recommends-header{font-size:16px;color:#999}div.recommends-keywords{display:block;margin-top:12px;padding:10px 0;overflow:hidden}.recommends-keywords-href{padding:6px 13px;overflow:hidden;border-radius:20px;margin-right:14px;border:1px solid #e6e6e6}.recommends-keywords span{font-size:14px;color:#666}.recommends-box{overflow:hidden;padding:16px 0 15px;border-top:#eee 1px solid}.recommends-box-first{padding-top:15px;border-top:0}.recommends-title{font-size:16px;margin-bottom:10px;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden}.recommends-info{font-size:13px;color:#999}.recommends-empty{text-align:center;padding:84px 0;color:#666}.recommends-more{padding-bottom:0}.hotpoint-more,.recommends-more-line{text-align:center;border-top:solid #e6e6e6 1px;line-height:45px;font-size:14px}.hotpoint-more a,.recommends-more-line a{color:#999}.hotpoint-more em,.recommends-more-line em{color:#2596DE;font-style:normal}.recommends-provider{padding-left:18px}.recommends-entry{text-align:center;font-size:16px;padding:15px 0 0}.recommends-entry-tag{color:#09f}.recommends-entry-link{color:#999;display:block}.recommend-act{display:table;table-layout:fixed;border-top:solid 1px #f0f0f0;border-bottom:solid 1px #f0f0f0;width:100%;background:#fff;margin:8px auto}.recommend-act-item{display:table-cell;border-left:solid 1px #f0f0f0;height:50px;line-height:50px}.recommend-act-item:first-child{border:0}.recommend-act-icon{display:inline-block;width:20px;height:20px;vertical-align:middle;margin-right:14px}.recommend-act-text{display:inline-block;vertical-align:middle}.hotpoint{width:100%;padding:16px 0 0;margin:8px 0;background-color:#fff;overflow:hidden;text-align:left;font-size:12px}.hotpoint-header{margin-bottom:13px;font-size:16px;color:#999}.hotpoint>div{margin-left:17px;margin-right:17px}.hotpoint .hotpoint-item{margin-bottom:8px;background-color:#f5f5f5;overflow:hidden;width:50%;-webkit-box-flex:6;-webkit-flex:6 6 auto}.hotpoint-row{margin:0;display:-webkit-box;display:-webkit-flex}.hotpoint-row .hotpoint-item:last-child{margin-left:5px}.hotpoint-row .hotpoint-item:first-child{margin-right:5px}.hotpoint-box{font-size:14px;text-align:center;line-height:39px;color:#333;padding-bottom:9px}.hotpoint-href-word-hot{position:relative;display:inline-block;vertical-align:top;max-width:100%;padding-right:20px}.hotpoint-href-word-hot i{position:absolute;top:5px;right:0}",MIP.registerMipElement("mip-recommend",e,MIP.css.mipRecommend)});